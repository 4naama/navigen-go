@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Raleway:wght@600&display=swap');

#page-title,
h1,
h2,
.alert-title,
.group-header-button {
  font-family: 'Raleway', sans-serif;
}

.page-subtext {
  font-family: 'Raleway', sans-serif;
  font-weight: 400;
  text-align: center;
  margin: 0.2em 0 1em;
}

/* Use Raleway for all group headers and section titles */
#popular-title,
.group-header-button,
.accordion-button {
  font-family: 'Raleway', sans-serif;
}

#popular-title {
  font-weight: bold;
  font-size: 20px;
  text-align: center;
  margin: 16px 0 16px 0;
  cursor: default;
}

/* Use Poppins for all buttons and location labels */
.quick-button,
button,
#search,
#search-box,
#here-button,
#alert-indicator {
  font-family: 'Poppins', sans-serif;
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background-color: #f7f9fb;
  color: #333;
  height: 100vh;
  overflow: hidden; /* important! scrolls are delegated to containers */
}

.header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1em;
  padding: 1em 0.5em 0.25em; /* ⬅️ reduced bottom padding */
  margin: 0;
  padding-left: max(1em, env(safe-area-inset-left));
  padding-right: max(1em, env(safe-area-inset-right));
}
#logo-icon {
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  display: inline-block;
  color: inherit;
  flex-shrink: 0;
  transition: transform 0.2s ease;
}

#logo-icon:hover {
  transform: scale(1.2) rotate(-5deg);
}

#page-title {
  flex: 1;
  font-size: 20px;
  line-height: 1.2;
  text-align: center;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 2.4em; /* ~matching 1.2em top & bottom padding */
  font-weight: bold;
}

.header-pin {
  font-size: 20px;
  line-height: 1;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  height: 1.2em;
}

.header-pin:hover {
  cursor: pointer;
  transform: scale(1.2) rotate(10deg);
  transition: transform 0.2s ease;
}

/* ===========================
   🔎 Search — unified styles
   (preserves your comment blocks, de-duplicated)
   =========================== */

/* 🎛️ Theme vars (easy to tweak) */
:root{
  --search-border: #d6dbe1;
  --search-focus:  #5b8def;               /* alt focus color (no black) */
  --search-shadow: rgba(91,141,239,.15);  /* soft focus ring */
}

/* 📦 Wrapper around the input and the clear button */
#search-left {
  position: relative;          /* needed for absolute clear button */
  display: inline-flex;
  align-items: center;
  width: 100%;
  min-width: 0;
}

/* 🧠 Search input field */
#search {
  width: 100%;
  height: 36px;
  padding: 8px 14px;
  padding-right: 2.25rem;      /* space for ❌ */
  box-sizing: border-box;
  background: #fff;
  border: 1px solid var(--search-border);
  border-radius: 6px;
  font-family: 'Poppins', sans-serif;
  font-size: 16px;
  font-weight: 400;            /* keep text clean; not bold */
  line-height: 1;
  outline: none;
}

/* Placeholder style */
#search::placeholder {
  font-weight: 400;
  color: #666;
  opacity: 1;
}

/* Focus state — avoid default black border */
#search:focus,
#search:focus-visible {
  border-color: var(--search-focus);
  box-shadow: 0 0 0 3px var(--search-shadow);
}

/* ❌ Clear button: visually sits inside the right side of the input */
#clear-search {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  display: none;               /* shown only when there's text */
  width: 24px;
  height: 24px;
  padding: 0;
  margin: 0;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  background: #fff;
  font-size: 12px;             /* capital, bold X */
  font-weight: 700;
  line-height: 1;
  color: #475569;
  cursor: pointer;
  z-index: 1;                  /* above input */
}
#clear-search:hover { background: #f1f5f9; color: #334155; }
#clear-search:active { transform: translateY(-50%) scale(0.98); }

/* Show ❌ when input has value (CSS-only approach) */
#search:not(:placeholder-shown) + #clear-search {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Optional JS hook: if you toggle a wrapper class in JS, this also shows ❌ */
#search-left.has-value #clear-search {
  display: inline-flex;
}

/* 📦 Search container layout */
#search-container {
  display: flex;
  justify-content: center;
  margin: 4px 1em;
}
#search-container > div {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-grow: 1;
  max-width: 420px;
  width: 100%;
}

/* ==============================
   📜 Main content + scroll zone
   (aligned, de-duplicated, maintainable)
   ============================== */

/* Layout constants (edit to match your UI) */
:root {
  --header-h: 56px;          /* fixed header height */
  --bottom-band-h: 50px;     /* fixed bottom band (my stuff/alert/help/acc) */
  --end-gap: 50px;           /* visual gap above bottom band */
  --stack-gap: 8px;          /* vertical spacing between blocks */
  --content-pad-x: 1em;      /* horizontal padding for content */
}

/* 📜 Main content area and scroll zone above bottom band */
#main-content {
  display: flex;
  flex-direction: column;
  /* Full *visible* viewport height minus fixed bars.
     Uses var(--vh) (set via JS) for mobile URL bar correctness. */
  height: calc(var(--vh, 100vh) - var(--bottom-band-h) - var(--header-h));
  box-sizing: border-box;
  padding: 0 var(--content-pad-x);
  overflow: hidden; /* disable scrolling here; delegate to #locations-scroll */
}

/* The ONLY vertical scroller for the page’s content */
#locations-scroll {
  flex: 1 1 auto;
  min-block-size: 0;               /* allow scroller to shrink in flex */
  overflow-y: auto;
  overscroll-behavior-y: contain;
  /* overflow-anchor: auto; default when line below is removed */
  box-sizing: border-box;

  /* Keep content clear of fixed bars (top/bottom) + add visual end gap */
  padding-top: 0; /* first item sits flush under header (header is outside) */
  padding-bottom: calc(var(--bottom-band-h)
                      + env(safe-area-inset-bottom, 0px)
                      + var(--end-gap));
  scroll-padding-bottom: calc(var(--bottom-band-h) + var(--end-gap));

  /* Touch polish + stable layout on scrollbar show/hide */
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  scrollbar-gutter: stable both-edges;

  /* Stacked layout for Popular + Accordion sections */
  display: flex;
  flex-direction: column;
  gap: var(--stack-gap);
}

/* Remove unintended extra gaps at the very top/bottom of the list */
#locations-scroll > :first-child { margin-top: 0; }
#locations-scroll .accordion-section:first-child { margin-top: 0; }
#locations-scroll .accordion-section:last-child  { margin-bottom: 0; }

/* Your existing quick buttons block */
#quick-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 6px;
  max-width: 90%;
}

.hidden { display: none !important; }

h2 {
  font-size: 20px;
  font-weight: bold;
  margin: 0.5em 0 0.25em;
}

/* 🟢 WhatsApp Button */
#whatsapp-link {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  color: #25d366;
  font-size: 22px;
  font-weight: bold;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  height: 40px; /* keeps it aligned with others */
}

#whatsapp-link .wa-icon {
  height: 22px;
  width: auto;
}

/* ♿ Accessibility Button */
#accessibility-button {
  display: inline-block;
  background: none;
  border: none;
  color: inherit;
  font-size: 22px;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  border-radius: 0.5em;
}

#accessibility-button:focus,
#accessibility-button:focus-visible {
  outline: none;
}

#locations h3 {
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  margin: 1em 0 0.5em 0;
}

#quick-buttons-wrapper {
  display: flex;
  justify-content: center;
  overflow-y: auto;
  max-height: 84px;
  margin-bottom: 1em;
  scroll-behavior: smooth;
}

.alert-button {
  background-color: #e63946;
  color: white;
  white-space: normal;
  text-align: center;
  line-height: 1.4;
  padding: 0.75em 1em;
  font-size: 20px;
  pointer-events: none;
  overflow-wrap: break-word;
  word-break: break-word;
  width: 100%;
  box-sizing: border-box;
}

.alert-box {
  background-color: #e63946;
  color: white;
  text-align: center;
  line-height: 1.5;
  padding: 0.75em 1em;
  font-size: 18px;
  width: 80%;
  max-width: 400px;
  margin: 1em auto;
  border-radius: 0.5em;
  box-sizing: border-box;
  white-space: pre-wrap;
  overflow-wrap: break-word;
  word-break: break-word;
  display: block;
}

.alert-card {
  background-color: #e63946;
  color: white;
  width: 90%;
  max-width: 320px;
  margin: 0.5em auto;
  border-radius: 0.5em;
  padding: 0.75em 1em;
  box-sizing: border-box;
  text-align: left;
  font-size: 18px;
  line-height: 1.5;
}

.alert-title {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  margin-bottom: 0.5em;
  font-size: 18px;
}

.alert-timestamp {
  font-weight: normal;
  font-size: 16px;
  color: #fdd;
  white-space: nowrap;
}

.alert-body {
  font-weight: normal;
  white-space: normal;
  word-break: break-word;
}

.alert-card.empty {
  background-color: #f0f0f0;
  color: #444;
  font-style: italic;
}

/* ──────────────── High Contrast Mode ──────────────── */
body.high-contrast {
  background-color: #111;
  color: #fff;
  font-size: 110%;
}

/* General Buttons */
body.high-contrast button,
body.high-contrast .quick-button,
body.high-contrast .accordion-button,
body.high-contrast .group-header-button {
  background-color: #222 !important;
  color: #fff !important;
  border: 1px solid #888 !important;
}

body.high-contrast button:hover,
body.high-contrast .quick-button:hover,
body.high-contrast .accordion-button:hover,
body.high-contrast .group-header-button:hover {
  background-color: #333 !important;
}

/* Accordion Inner Group Buttons */
body.high-contrast .group-buttons .quick-button,
body.high-contrast .location-button {
  background-color: #222 !important;
  color: #fff !important;
  border: 1px solid #666 !important;
}

body.high-contrast .group-buttons .quick-button:hover,
body.high-contrast .location-button:hover {
  background-color: #333 !important;
}

/* ⭐ Special Case: Popular Group */
body.high-contrast .group-header-button[data-group="group.popular"],        /* 💥 Popular replaced*/
body.high-contrast .quick-button[data-group="group.popular"] {              /* 💥 Popular replaced*/
  background-color: rgba(255, 193, 7, 0.2) !important;
  color: #fff !important;
  border-color: #ffc107 !important;
}

body.high-contrast .quick-button[data-group="group.popular"]:hover {            /* 💥 Popular replaced*/
  background-color: rgba(255, 193, 7, 0.3) !important;
}

/* Optional: Large Text */
body.large-text {
  font-size: 1.15em;
}

/* ------------------------------
   General Icon Styles
   ------------------------------ */

/* Use for emoji, <img>, or <svg> icons inline with text or buttons */
.icon, .icon-img, .icon-svg {
  width: 1.2em;
  height: 1.2em;
  vertical-align: middle;
  display: inline-block;
  line-height: 1;
}

/* ------------------------------
   Community Zone Buttons
   ------------------------------ */

.community-button {
  display: inline-block;
  background: #e6f7fb;
  color: #222;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 0.6em 1em;
  margin: 0.4em;
  font-size: 1em;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.community-button:hover {
  background-color: #e6e6e6;
  border-color: #ccc;
}

.community-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 1em;
}


/* ------------------------------
   Social Link Buttons
   ------------------------------ */

/* Circular social button container (e.g., for Twitter, GitHub, etc.) */
.social-link {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 3em;
  height: 3em;
  margin: 0.5em;
  border-radius: 50%;
  background-color: #f1f1f1;
  transition: background-color 0.2s ease;
}

.social-link:hover {
  background-color: #ddd;
}

/* Icon inside social-link button */
.social-link img {
  width: 24px;
  height: 24px;
}


/* ------------------------------
   Standalone Social Icons
   ------------------------------ */

/* Container style */
.social-link-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1.25em;
  margin-top: 1em;
}

/* Each icon wrapper */
.social-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background-color: #f1f1f1;
  transition: background-color 0.2s ease;
}

/* Icon image inside */
.social-icon img {
  width: 28px;
  height: 28px;
  transition: transform 0.2s ease;
}

/* Hover effect (desktop only) */
@media (hover: hover) {
  .social-icon:hover {
    background-color: #e0e0e0;
  }

  .social-icon img:hover {
    transform: scale(1.2);
  }
}

/* Responsive grid for flag/language selection */
.flag-list {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* Max 4 per row */
  gap: 1em;
  justify-items: center;
  margin-top: 1em;
}

/* Flag icon inside the grid */
.flag-list img {
  width: 40px;
  height: 40px;
  border-radius: 4px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}

/* Desktop hover only */
@media (hover: hover) {
  .flag-list img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
  }
}

/* Disabled flag style (subtle dim with grayscale) */
.flag-list img.disabled {
  opacity: 0.35;
  filter: grayscale(100%);
  pointer-events: none;
  cursor: default;
}

/* ⛔ Removed selected-flag styling */
/* Was used to show blue border for active language — removed by user request */
.flag-list img.selected-flag {
  border: none !important;
  padding: 0 !important;
  box-shadow: none !important;
  background: none !important;
}

/* ──────────────── Modal Containers ──────────────── */
/* All modals share these base layout rules */
#my-stuff-modal,
#help-modal,
#language-modal,
#social-modal,
#alert-modal,
#pinned-modal {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  padding: 2em;
  z-index: 1000;
}

#my-stuff-modal:not(.hidden),
#help-modal:not(.hidden),
#language-modal:not(.hidden),
#social-modal:not(.hidden),
#alert-modal:not(.hidden),
#pinned-modal:not(.hidden) {
  display: flex;
}

/* ──────────────── Main Modal Container ──────────────── */
/* Defines scrollable vertical layout — structure only; visual layout is handled by layout modifiers (e.g. .modal-action) */
.modal-content {
  display: flex;                              /* ✅ Enables vertical stacking of children */
  flex-direction: column;                     /* ✅ Top-to-bottom content flow */
  background: white;                          /* ✅ White modal background (used unless overridden) */
  border-radius: 0.5em;                       /* ✅ Rounded corners for visual clarity */
  padding: 1.5em;                             /* ✅ Inner spacing for typical modals */

  width: min(95vw, 720px);                    /* ✅ Responsive width: stretches up to a limit */
  max-height: calc(100vh - 6em);              /* ✅ Prevents modal from touching screen edges vertically */
  overflow-y: auto;                           /* ✅ Enables scroll inside modal body if content overflows */

  z-index: 1001;                              /* ✅ Positions above backdrop layer */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25); /* ✅ Drop shadow gives depth to modal card */
  font-size: 18px;                            /* ✅ Base font size inside modal */
  line-height: 1.5;                           /* ✅ Ensures readable spacing for multi-line text */
  box-sizing: border-box;                     /* ✅ Includes padding within declared width */
}

/* 🧾 Paragraph styling inside modals for consistent spacing and readability */
/* Applies to direct <p> elements inside any modal-content container */
.modal-content p {
  font-size: 14px;           /* ✅ Smaller, modal-friendly text size */
  margin-bottom: 1em;        /* ✅ Creates vertical spacing between text blocks */
  text-align: center;        /* ✅ Center-align for modals like Share or Confirm */
}

/* 🎁 Styled Stripe donation buttons inside modal */
/* Applies only to buttons used for Stripe purchases */
.modal-content form {
  display: flex;             /* ✅ Ensures centering horizontally */
  justify-content: center;  /* ✅ Centers button in modal */
  margin-bottom: 1.2rem;     /* ✅ Adds space below each button */
}

/* ✅ Add spacing between each donation button form */
.modal-content form + form {
  margin-top: 0.5rem;        /* ✅ Adds vertical space between stacked forms */
}

.donation-note-wrapper {
  text-align: center;
  margin-bottom: 1.4rem;
}

.donation-note {
  font-size: 15px;
  font-weight: 500;
  color: #444;
  line-height: 1.5;
}

.donation-options {
  display: flex;
  flex-direction: column;
  align-items: center;  /* ✅ Center buttons horizontally */
  gap: 0.6rem;          /* ✅ Space between buttons */
  margin-bottom: 1.4rem;
}

.smiley {
  display: block;
  margin-top: 4px;
  font-size: 16px;
  color: #666;
}

#stripe-loader {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.96); /* Slightly stronger overlay */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-family: "Raleway", sans-serif;
  font-size: 1rem;
  color: #333;
  z-index: 9999;
  pointer-events: all;             /* Ensures it blocks interaction */
  transition: opacity 0.3s ease;   /* Smooth fade if animated */
}

#stripe-loader.hidden {
  opacity: 0;
  pointer-events: none;
}

.stripe-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #8fd19e;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}


.modal-content button[type="submit"] {
  width: 80%;                                 /* ✅ Uniform button width (responsive) */
  padding: 0.9rem 1.4rem;                     /* ✅ Comfortable padding */
  font-size: 16px;                            /* ✅ Slightly smaller text than modal body */
  font-weight: 600;                           /* ✅ Strong readable label */
  border: none;                               /* ✅ Clean borderless look */
  border-radius: 10px;                        /* ✅ Rounded corners to match modal style */
  background: linear-gradient(to right, #ffeac4, #fff5e5); /* ✅ Soft pastel background */
  color: #5a3e00;                             /* ✅ Warm, friendly text color */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);  /* ✅ Subtle shadow for depth */
  cursor: pointer;                            /* ✅ Clickable feel */
  transition: all 0.2s ease;                  /* ✅ Smooth hover animation */
}

.modal-content button[type="submit"]:hover {
  background: #ffe1b0;                        /* ✅ Slight darkening on hover */
  transform: translateY(-2px);                /* ✅ Subtle lift on hover */
}

/* ──────────────── Scrollable Content Area ──────────────── */
/* Ensures long content inside body scrolls properly */
.modal-body {
  overflow-y: auto;
  flex-grow: 1;
  padding: 0;              /* ⛔ Removed padding to avoid inset scrollbar */
  scrollbar-gutter: stable; /* ✅ Keeps scrollbar flush right without shifting content */
}

/* Inner wrapper for proper spacing inside modal content */
.modal-body-inner {
  padding: 1.2rem;         /* ✅ Provides inner spacing without affecting scrollbar edge */
}

/* ──────────────── Modal Headers & Top Bar ──────────────── */
/* Titles, Close button, and top layout inside modal-content */
.modal-top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1em;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* light gray */
}

.modal-top-bar h2 {
  flex-grow: 1;
  font-size: 20px;
  margin: 0;
  text-align: center;
}

/* ──────────────── Close Button (Top Right, Minimal) ──────────────── */
/* Used in modal-top-bar for consistent UX */
.modal-close {
  font-size: 1.5em;
  background: none;
  border: none;
  color: #e74c3c;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

/* ──────────────── Modal Footer Layout ──────────────── */
/* Shared footer layout for modals: My Stuff, Share, Alert, Confirm, Resolved, etc. */
.modal-footer {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 1.5em;
  padding: 0.75em 0 0.5em;
  border-top: 1px solid rgba(0, 0, 0, 0.08);
  background: rgba(245, 245, 245, 0.95);
  backdrop-filter: blur(3px);
  gap: 1em; /* default gap; JS can override dynamically if needed */
  flex-wrap: wrap; /* LPM: allow a second row */
}

/* ──────────────── Modal Footer Buttons ──────────────── */
/* Used in info-type modals like "My Stuff" with a neutral footer action */
.modal-footer-button {
  background: #d1e0fe;
  color: #0f172a;
  font-weight: 500;
  font-size: 0.95rem;
  padding: 0.7em 1.25em;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: background 0.2s ease, transform 0.1s ease;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.5em;
  text-align: left;
}

.modal-footer-button:hover {
  background: #1667cc;
  transform: translateY(-1px);
}

/* Footer button inside modal-footer container */
.modal-footer .modal-footer-button {
  width: auto;
  align-self: center; /* tidy alignment */
}

/* ──────────────── LPM tweaks (no new classes) ──────────────── */
/* push ⋮ to the right */
#lpm-overflow {
  margin-left: auto; /* 🎯 | ⭐ | —— space —— | ⋮ */
}

/* secondary actions container under the main row */
#lpm-secondary-actions {
  flex-basis: 100%;  /* clean break onto new line */
  display: none;     /* hidden until ⋮ toggles */
  margin-top: 0.5em;
  gap: 0.5em;
}

/* reveal when active */
#lpm-secondary-actions.is-open {
  display: flex;
  flex-wrap: wrap;   /* wrap gracefully on narrow screens */
}

/* ──────────────── LPM Image Slider ──────────────── */
/* Container within .location-media */
/* LPM slider: reserve space and crossfade (no layout shift) */
/* LPM slider: fixed box + crossfade */
.lpm-slider {
  position: relative;
  width: 100%;
  aspect-ratio: 1/1;
  border-radius: 8px;
  overflow: hidden;
  box-sizing: border-box;
  padding-top: 8px;
}
.lpm-track {
  position: relative;
  width: 100%;
  height: 100%;
}

/* two-image buffer */
.lpm-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  opacity: 0;transition: opacity 160ms ease;
}

.lpm-img.active {
  opacity: 1;
}

/* Slides */
.lpm-slide {
  display: none;
  width: 100%;
  height: auto;
  object-fit: cover;
}
.lpm-slide.active {
  display: block;
}

/* Nav buttons */
.lpm-prev, .lpm-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: rgba(0,0,0,0.35);
  color: #fff;
  font-size: 2rem;
  line-height: 1;
  padding: 0 0.5rem;
  cursor: pointer;
  border-radius: 6px;
}
.lpm-prev { left: 10px; }
.lpm-next { right: 10px; }
.lpm-prev:focus, .lpm-next:focus { outline: 2px solid rgba(255,255,255,0.6); }

.lpm-prev, .lpm-next { background: rgba(0,0,0,0.6); color:#fff; }
.lpm-prev:hover, .lpm-next:hover { background: rgba(0,0,0,0.6); }


/* ──────────────── Modal Body Action Button ──────────────── */
/* Used in body-action modals like "Share" */
.modal-body-button {
  background: #d1e0fe;
  color: #0f172a;
  font-weight: 500;
  font-size: 0.95rem;
  padding: 0.5em 1em;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: background 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  min-width: 120px;
  max-width: 100%;
  align-self: center;
}

.modal-body-button:hover {
  background: #c6dafe;
  transform: translateY(-1px);
}

/* ──────────────── Modal Body Text Styles ──────────────── */
.modal-body .muted {
  font-size: 0.9em;
  color: #666;
  margin-bottom: 0.5em;
}

.modal-body .location-coords {
  font-size: 1.1em;
  margin-bottom: 1em;
  font-family: monospace;
}

/* Coordinates display formatting */
.modal-body .location-coords {
  font-size: 1.1em;
  margin-bottom: 1em;
}

/* ──────────────── My Stuff Menu Cards ──────────────── */
/* Styled like grouped quick-buttons, but tailored for modal menu use */
/* Scalable base: can later be driven by dynamic JSON like group-buttons */

.my-stuff-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  margin: 0.5em 0;
  width: 100%;
  background: #f8f8f8;
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  font-family: inherit;
  font-size: 1rem;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s ease;
}

.my-stuff-item:hover {
  background: #f1f1f1;
}

.my-stuff-item .icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.my-stuff-item .label {
  display: flex;
  flex-direction: column;
  font-weight: 600;
  line-height: 1.2;
}

.my-stuff-item .label small {
  font-weight: 400;
  opacity: 0.7;
  font-size: 0.85rem;
}

/* ──────────────── No-Miss Info View ──────────────── */
.no-miss-section {
  padding: 1rem;
  font-size: 0.95rem;
  line-height: 1.6;
}

.no-miss-section .section-header {
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 1rem;
}

.no-miss-section .section-header small {
  display: block;
  font-weight: 400;
  font-size: 0.85rem;
  opacity: 0.7;
  margin-top: 0.2rem;
}

.no-miss-block {
  margin-bottom: 1rem;
}

.no-miss-title {
  font-weight: 600;
  margin-bottom: 0.3rem;
}

.no-miss-body {
  font-weight: 400;
  opacity: 0.85;
}

.no-miss-thanks {
  margin-top: 1.5rem;
  font-weight: 500;
  text-align: center;
  font-size: 1rem;
}

/* Inline SVG logo icon replacement for 👤 */
.inline-icon.logo-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  vertical-align: text-bottom;
  background: url('/assets/logo-icon.svg') no-repeat center center;
  background-size: contain;
}


/* WhatsApp */
.wa-text {
  font-weight: normal;
  font-size: 20px;
  color: #128c7e;
}

button:hover {
  background-color: rgba(0, 0, 0, 0.08);
  transition: background-color 0.2s ease;
}

/* Accordion Section */
.accordion-section {
  margin-top: 8px;
  scroll-margin-top: var(--header-h);
}

.accordion-body {
  display: none;
  padding: 0.5em 1em;
  border: 1px solid #e0e0e0;
  border-top: none;
  background-color: #fafafa;
}

.accordion-button {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 10px 16px;
  font-size: 16px;
  font-weight: bold;
  color: black;
  background-color: white;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  box-sizing: border-box;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin-bottom: 0.5em;
}

.accordion-button > span {
  margin-left: 1em;
}

/* Optional spacing between stacked headers */
.accordion-button + .accordion-button {
  margin-top: 0.5em;
}

/* Base style for ALL quick buttons */
.quick-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: white;
  border: 1px solid transparent;
  color: black;
  cursor: pointer;
  white-space: nowrap;
  text-align: center;
  line-height: 1;
  flex-shrink: 0;
  box-sizing: border-box;
  margin: 4px 6px;
  transition:
    background-color 0.2s ease,
    transform 0.1s ease,
    box-shadow 0.1s ease,
    border-color 0.2s ease;
}

.quick-button:hover {
  background-color: var(--group-color, #f5f5f5);
  border-color: var(--group-color-ink, #999);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* Optional: softer hover background for Populars only */
.quick-button.popular-button:hover {
  background-color: #fff3e5;
  border-color: #e36700;
}

/* Group header buttons (category titles like "Social", "Stages", etc.) */
.group-header-button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5em;
  height: 2.8em;
  padding: 0 1em;
  font-size: 18px;
  border-radius: 6px;
  border: 1px solid #ddd;
  background: none;
  color: inherit;
  width: 100%;
  text-align: left;
  cursor: pointer;
  margin: 0;
  transition: border-color 0.2s ease, background-color 0.2s ease;
}

.group-header-button .header-title {
  flex-grow: 1;
  text-align: left;
}

.group-header-button .header-meta {
  font-size: 0.9em;
  opacity: 0.7;
}

.group-header-button .header-arrow {
  font-size: 1.1em;
  opacity: 0.6;
}

.group-header-button:hover {
  border-color: var(--group-color-ink, #999);
  background-color: var(--group-color, #f9f9f9);
}

.group-header-button .header-arrow::after {
  content: "▸";
  display: inline-block;
  transition: transform 0.25s ease;
}

.group-header-button.open .header-arrow::after {
  transform: rotate(90deg);
}

.group-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 4px 6px; /* row gap = 4px, column gap = 6px */
  padding: 0.2em 0 0.4em;
  margin-top: 0.25em;
}

.group-buttons.hidden {
  display: none;
}

/* Unified shape & spacing */
.group-buttons button.quick-button[data-group]:not([data-group="Alerts"]):not([data-group="Social"]) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: var(--group-color, white); /* was: white */
  color: black;
  cursor: pointer;
  white-space: nowrap;
  line-height: 1;
  flex-shrink: 0;
  box-sizing: border-box;
  margin: 2px 4px;
  transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.1s ease;
}

/* Hover styling */
.group-buttons button.quick-button[data-group]:not([data-group="Alerts"]):not([data-group="Social"]):hover {
  background-color: var(--group-color, #f9f9f9); /* was: #f9f9f9 */
  border-color: var(--group-color-ink, currentColor);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* 🎯 Location/group child buttons inside accordion or popular sections */
.location-button {
  border: 1px solid var(--group-color-ink, transparent); /* was: transparent */
  border-radius: 6px;
  padding: 6px 12px;
  font-weight: 500;
  background: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.location-button:hover {
  box-shadow: 0 0 0 2px var(--group-color-ink, currentColor); /* was: currentColor */
  background-color: var(--group-color, #fafafa);              /* was: #fafafa */
}

/* sub headers */
.subheader {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: 6px 8px 4px 16px;   /* extra indent */
  font-weight: 600;            /* semi-bold subs */
  cursor: pointer;
  user-select: none;
}

/* chevron – show only if there are items (needs Chrome/Edge/Safari :has) */
.subheader:has(+ .subgroup-items:not(:empty))::after {
  content: "▸";
  margin-left: auto;
  opacity: .6;
  transition: transform .18s ease, opacity .18s ease;
}

/* expanded state flips chevron */
.subheader.is-open:has(+ .subgroup-items)::after {
  transform: rotate(90deg);
  opacity: .8;
}

/* optional count pill pulled from data-count */
.subheader[data-count]::before {
  content: attr(data-count);
  font-weight: 600;
  font-size: 11px;
  line-height: 1;
  padding: 3px 6px;
  border-radius: 999px;
  background: rgba(0,0,0,.08);
  color: rgba(0,0,0,.65);
}

/* wrapper that holds the sub’s buttons */
.subgroup-items {
  padding: 6px 0 8px 24px;     /* nested indent under the sub */
}

/* collapsed */
.subgroup-items.is-collapsed { display: none; }

#here-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: white;
  border: 1px solid #e63946; /* red border */
  color: black;
  cursor: pointer;
  line-height: 1;
  white-space: nowrap;
  box-sizing: border-box;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin-left: 16px; /* ✅ replaces previous margin, adds reliable space from input */
}

#here-button:hover {
  background-color: #ffe5e8;
  border-color: #c92a38;
}

#search-box {
  font-size: 16px;
  font-weight: bold;
  padding: 8px 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
  line-height: 1;
  height: 36px;
  box-sizing: border-box;
  background-color: white;
  vertical-align: middle;
}

#search-box:focus {
  border-color: #888;
  box-shadow: 0 0 0 2px rgba(0,0,0,0.05);
}

#alert-indicator {
  font-size: 20px;
  cursor: pointer;
  padding: 6px 10px;
  margin-left: 8px;
  border-radius: 6px;
  border: 1px solid #ff4d4f;
  background-color: white;
  color: #ff4d4f;
  font-weight: bold;
  line-height: 1;
  transition: background-color 0.3s ease, opacity 0.3s ease;
}

/* Flashing red effect */
.flashing-alert {
  animation: flash-alert 1s infinite;
}

@keyframes flash-alert {
  0%, 100% { background-color: white; }
  50%      { background-color: #ffe6e6; }
}

#alert-indicator.hidden {
  display: none;
}

/* 📎 Bottom Band Layout */
#bottom-band {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px; /* reduced from 60px */
  background: #fff;
  border-top: 1px solid #ccc;
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: 999;
  box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.1);
}

/* 🎛️ Unified Bottom Band Button Styles */
#bottom-band button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: inherit;
  font-size: 20px; /* slightly smaller to match reduced band height */
  line-height: 1;
  cursor: pointer;
  padding: 0;
  border-radius: 0.5em;
  height: 34px; /* reduced from 40px */
  width: 34px;  /* keep square */
}

#bottom-band button:hover {
  background-color: rgba(0, 0, 0, 0.05);
  transition: background-color 0.2s ease;
}

#help-modal,
#language-modal,
#social-modal,
#alert-modal,
#pinned-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.25);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  padding: 2em;
}

@keyframes reveal-scroll-space {
  0%   { transform: translateY(0); }
  10%  { transform: translateY(-48px); }  /* pull up */
  70%  { transform: translateY(-48px); }  /* hold position */
  100% { transform: translateY(0); }      /* release */
}

.scroll-hint {
  animation: reveal-scroll-space 2.8s ease-out;
}

.alert-block {
  padding: 1em 0;
}

.alert-message {
  text-align: center;
  margin-bottom: 0.5em;
}

.fade-out {
  opacity: 0;
  transition: opacity 0.5s;
}

.alert-summary {
  border-top: 1px solid #1b8e0d; /* soft green */
  margin-top: 1em;
  padding-top: 0.75em;
  text-align: center;
  font-size: 0.85em;
  color: #444;
  opacity: 0.85;
}

.community-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 12px 0;
}

#locations {
  margin-top: 1em;
}

.quick-buttons-wrapper {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0px;
  max-height: calc(2 * (36px + 8px)); /* 2 rows: height + vertical margin */
  overflow-y: auto;
  scroll-behavior: smooth;
}

.quick-buttons-wrapper::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 16px;
  pointer-events: none;
  background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));
}

.section-spacer {
  height: 1.0em;
}
/* Placeholder message for empty states */
.empty-placeholder {
  text-align: center;
  padding: 2em 1em;
  color: #888;
  font-style: italic;
  font-size: 16px;
  line-height: 1.6;
}

/* ────────────── Toast Notification (Updated) ────────────── */
.toast {
  position: fixed;
  bottom: 33vh; /* 👈 One-third from bottom */
  left: 50%;
  transform: translateX(-50%) translateY(20px);
  background: #ffffff;
  color: #333333;
  padding: 14px 24px;
  border-radius: 12px;
  font-size: 17px;
  font-weight: 500;
  font-family: inherit;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 10000;
  opacity: 0;
  pointer-events: auto;
  transition: opacity 0.4s ease, transform 0.4s ease;
}

.toast.visible {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* 📦 Center contents inside toast */
.toast-content {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 🔘 Button inside toast (matching resolved button) */
.toast-btn {
  margin-top: 10px;
  background: #d1e0fe;
  color: 0f172a;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 500;
  font-family: inherit;
  cursor: pointer;
  transition: background 0.3s ease;
}

.toast-btn:hover {
  background: #c6dafe;
}

/* 📝 Optional subtext */
.subtext {
  font-size: 13px;
  color: #666;
  margin-top: 6px;
}

.toast-link {
  color: #1976d2; /* Resolved blue */
  font-weight: 500;
  text-decoration: underline;
  margin-top: 8px;
}

.toast-link:hover {
  text-decoration: none;
}

#scroll-zone {
  overflow-y: auto;
  height: calc(100vh - 400px); /* adjust this if layout shifts */
  padding-bottom: 90px;
}

/*** OLD
/* ==========================================================================

   🧩 Modal Layout Variants (Structural Roles)

   Each modal adopts one of the following layout roles, defined by structural
   class modifiers. These control width, padding, and footer/header presence.

   --------------------------------------------------------------------------

   • Default Modal
     Class:         .modal
     Width:         Standard
     Footer:        Included (.modal-footer)
     Use Case:      General-purpose — My Stuff, Data Processing, Language

   • Body-Action Modal
     Class:         
     Width:         Standard
     Footer:        Not present
     Use Case:      Primary interaction is inside body — Share Location Modal, Community Zone

   • Compact Modal (optional)
     Class:         .modal.modal--compact
     Width:         Reduced (narrower modal-content)
     Footer:        Optional
     Use Case:      Lightweight prompts, quick decisions

   • Bare Modal (optional)
     Class:         .modal.modal--bare
     Width:         Minimal
     Footer:        None
     Header:        None
     Use Case:      Raw alerts, system messages, minimal overlays

   --------------------------------------------------------------------------

   Layout is always applied explicitly by modal creator:
     → injectModal({ ... });
     → document.getElementById('your-id').classList.add('modal--no-footer');

   injectModal() is structure-only and does not assign layout variants.

   ========================================================================= */


/* ==========================================================================

   🧩 Modal Layout Variants — CSS Roles

   Each modal layout is applied via structural utility classes. These modify
   width, padding, and the presence of modal regions (e.g. footer/header).

   ========================================================================= */

/* ──────────────── Default Modal (Standard Layout) ──────────────── */
/* Applied automatically via .modal (no modifiers needed) */
/* Used for: My Stuff, Data Processing, any general modal */
.modal {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 1000;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(3px);
  align-items: center;
  justify-content: center;
}

.modal.visible {
  display: flex;
}

.modal.hidden {
  display: none !important;
}

/*** CURRENT Styles Replacing OLD ones
/* ==========================================================================  
   🧩 Current Modal Type Styles — Semantic Structure Layer  
   Defines high-level layout and behavior for each modal type  
   Migrating from legacy ID- and modifier-based styling
   ========================================================================= */

/* ──────────────── modal-menu ──────────────── */
/* Used for: "My Stuff", Language, Social menu listings */
.modal-menu {
  display: flex;
  flex-direction: column;
  gap: 0.75em;
  padding: 1.5em;
  background-color: #fff;
  border-radius: 12px;

  /* Fix: allow content to use full modal width */
  width: auto;
  max-width: none;
  flex: 1;
  
/* Replaces .my-stuff-item / .modal-menu-item shared structure */
.modal-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  width: auto;
  background: #f8f8f8;
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  font-family: inherit;
  font-size: 1rem;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s ease;
}

.modal-menu-item:hover {
  background: #f1f1f1;
}


/* ──────────────── Modal Layout ──────────────── */
/* Used for: Share Location, Help — body layout and button actions */

.modal-layout {
  padding: 1.5em;
}

.modal-layout .modal-body-inner {
  font-size: 16px;
}

.modal-layout .modal-body p {
  font-size: 1.05rem;
  line-height: 1.5;
  margin-bottom: 1.5em;
  text-align: left; /* ⬅️ left-align paragraph text */
}

.modal-layout .form-control {
  display: block;
  margin-bottom: 1.5em;
  text-align: left;
}

.modal-layout .modal-actions {
  display: flex;
  flex-direction: column;
  align-items: flex-start;   /* ⬅️ left-align button */
  gap: 0.75em;
  margin-top: 1.5em;
}

/* ──────────────── Share Location Modal — Unified Layout ──────────────── */
#share-location-modal.hidden {
  display: none;
}

#share-location-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1em;
  background: rgba(0, 0, 0, 0.25); /* ✅ unified dark backdrop */
}

/* ✅ Center contents inside modal */
#share-location-modal .modal-body {
  text-align: center;
}

/* ✅ Coordinates style */
#share-location-coords {
  font-family: monospace;
  font-size: 1.1rem;
  margin: 0.75em 0;
  text-align: center;
}

/* ✅ Space above buttons */
#share-location-modal .modal-footer,
#share-location-modal .modal-actions {
  margin-top: 1.5em;
}

/* ──────────────── modal-alert ──────────────── */
/* Used for: Alert stacks — dismissable cards with footer */

.modal-alert {
  padding: 1.5em;
}

.modal-alert .alert-card {
  background: #fff9f9;
  border: 1px solid #ffd0d0;
  border-radius: 8px;
  padding: 1em 1.25em;
  margin-bottom: 1em;
  box-shadow: 0 0 0 1px rgba(255, 0, 0, 0.08);
}

.modal-alert .alert-card.unread {
  background: #fff3f3;
  border-color: #ff9999;
}

.modal-alert .alert-card .alert-action {
  margin-top: 0.75em;
  text-align: right;
}

/* Optional footer status bar (e.g. "Seen: 1 / 3") */
.modal-alert-footer {
  margin-top: 1.25em;
  font-size: 0.85rem;
  text-align: center;
  opacity: 0.7;
  border-top: 1px solid #e0e0e0;
  padding-top: 0.75em;
}

/* ──────────────── Modal Shop Category ──────────────── */
/* ──────────────── modal-shop-item ──────────────── */
/* Used for: Final donation/product checkout */

.modal-shop-item {
  padding: 1.5em;
}

.modal-shop-item .price {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1em;
}

/* ──────────────── Purchase History Cards ──────────────── */
/* Used for: Rendering receipt cards inside My Stuff modal */
/* Mirrors donation-option styling for visual consistency */

.purchase-card {
  background: #f9f9fc;                  /* 🧊 Soft, clean background */
  border: 1px solid #e5e7eb;            /* 🪟 Subtle border */
  border-radius: 12px;                  /* 💫 Rounded edges */
  padding: 1rem 1.2rem;                 /* 📦 Space inside */
  margin-bottom: 1rem;                  /* 📏 Space between cards */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04); /* ✨ Soft lift */
}

.purchase-card:hover {
  border-color: #1a73e8;
  box-shadow: 0 2px 6px rgba(26, 115, 232, 0.12);
}

.purchase-card .subtext {
  font-size: 0.85rem;
  font-weight: 400;
  color: #666;
}

.purchase-card .timestamp {
  font-size: 0.8rem;
  color: #999;
}

/* ──────────────── Purchase History Container ──────────────── */
/* Hosts all rendered purchases inside the modal */
/* Prevents height collapse and ensures cards are displayed */

#purchase-history {
  display: grid;                    /* ✅ Ensures spacing between purchase cards */
  grid-template-columns: 1fr;      /* ✅ Single-column layout */
  gap: 1em;                         /* ✅ Vertical spacing between cards */
  padding: 1.5em;                   /* ✅ Modal-safe inner spacing */
  min-height: 100px;               /* ✅ Prevents collapse when cards exist */
}


/* ✅ Make the checkmark blue */
.form-control input[type="checkbox"]:checked {
  accent-color: #1a73e8;
}

/* ✅ Keep checkbox label text muted */
.form-control {
  display: flex;
  align-items: center;
  gap: 0.5em;
  font-size: 0.95rem;
  color: #666; /* Adjust to your muted style if needed */
}

/* Header tint (soft background, readable border) */
.group-header-button[data-group] {
  /* do not remove existing comments; add minimal ones only */
  background-color: var(--group-color, transparent);
  border-color: var(--group-color-ink, currentColor);
}

/* Nested buttons: read ink color from the container vars set by JS */
.accordion-body .location-button,
.group-buttons .location-button {
  border-color: var(--group-color-ink, #ddd);
  box-shadow: 0 0 0 1px var(--group-color-ink, #ddd);
}

/* Hover/focus: gentle fill using the base color */
.location-button:hover,
.location-button:focus {
  background-color: var(--group-color, transparent);
}

/* Optional: quick buttons, chips, etc., if you have them */
.quick-button[data-group] {
  border-color: var(--group-color-ink, currentColor);
  background-color: var(--group-color, transparent);
}
