@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Raleway:wght@600&display=swap');

#page-title,
h1,
h2,
.alert-title,
.group-header-button {
  font-family: 'Raleway', sans-serif;
}

/* sub-tagline: wrap safely and align to accordion column */
.page-subtext{
  display: block;              /* own line */
  white-space: normal;         /* wrap normally */
  overflow-wrap: anywhere;     /* break long tokens */
  word-break: break-word;      /* legacy engines */
  line-height: 1.3;

  box-sizing: border-box;      /* padding included in width */
  width: 100%;
  max-width: min(100%, 640px); /* match column cap; responsive down */
  margin: 4px auto 1em;        /* center in the column */
  padding: 0 16px;             /* same side padding as buttons */
  text-align: center;          /* keep it centered */
}

/* Use Raleway for all group headers and section titles */
#popular-title,
.group-header-button,
.accordion-button {
  font-family: 'Raleway', sans-serif;
}

#popular-title {
  font-weight: bold;
  font-size: 20px;
  text-align: center;
  margin: 16px 0 16px 0;
  cursor: default;
}

/* Use Poppins for all buttons and location labels */
.quick-button,
button,
#search,
#search-box,
#here-button,
#alert-indicator {
  font-family: 'Poppins', sans-serif;
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background-color: #f7f9fb;
  color: #333;
  height: 100vh;
  overflow: hidden; /* important! scrolls are delegated to containers */
}

.header-bar{
  display:flex; align-items:center; justify-content:space-between;
  gap:.5em;
  padding:6px 8px 4px; /* tighter top/bottom */
  margin:0;
  padding-left:max(8px, env(safe-area-inset-left));
  padding-right:max(8px, env(safe-area-inset-right));
}

#logo-icon {
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  display: inline-block;
  color: inherit;
  flex-shrink: 0;
  transition: transform 0.2s ease;
}

#logo-icon:hover {
  transform: scale(1.2) rotate(-5deg);
}

/* animate on tap/click too (not just hover) */
#logo-icon:active {
  transform: scale(1.2) rotate(-5deg);
}

#page-title {
  flex: 1;
  font-size: 20px;
  line-height: 1.2;
  text-align: center;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 2.4em; /* ~matching 1.2em top & bottom padding */
  font-weight: bold;
}

.header-pin {
  font-size: 20px;
  line-height: 1;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  height: 1.2em;
}

.header-pin:hover {
  cursor: pointer;
  transform: scale(1.2) rotate(10deg);
  transition: transform 0.2s ease;
}

/* View-by filter size & interactions â€” inline with the info box */
#view-filter{
  display: none;                   /* legacy button hidden; FVB is the trigger */
}

/* When placed after the "Filtered by:" box, align to same gutter (RTL-safe) */
#filters-inline{
  position: relative;                          /* anchor for popover */
  display: flex; align-items: center; gap: .5rem;
  margin-block: 6px;
  margin-inline: var(--content-pad-x);
}

/* Apply box look only to the value; label will not get a border */
#listing-filter-value{
  box-sizing: border-box; display: inline-flex;      /* center text */
  align-items: center; padding: 6px 10px;
  font-size: .95em; text-align: start;               /* RTL-safe */
  color: #475569;
  border: 1px solid #e2e8f0; border-radius: 6px;
  white-space: nowrap;                               /* keep intact */
}

/* label stays gray */
#listing-filter-label{
  flex: 0 0 auto;                                    /* natural width */
  background: #f8fafc;
}

/* FVB â€” unified base style, button-like */
#listing-filter-value{
  flex: 1 1 auto; min-width: 0;                      /* can grow */
  cursor: pointer; user-select: none;                /* button feel */
  background: linear-gradient(#e5f0ff, #d9e9ff);     /* deeper, buttony */
  border-color: #7fb4fc;                             /* slightly deeper */
  box-shadow:
    0 1px 0 rgba(0,0,0,.03),                         /* top bevel */
    0 1px 4px rgba(59,130,246,.12);                  /* soft drop */
  transition: background .15s ease, box-shadow .15s ease, transform .05s ease;
}

/* FVB chevron: closed = â–¼ (rotate 90), open = â–¶ (rotate 0) */
#listing-filter-value{
  position: relative;                 /* anchor the chevron */
  padding-right: calc(1em + 1.2em);   /* keep glyph clear at 1em inset */
}

#listing-filter-value::after{
  content:"â–¸";                        /* base arrow (right) */
  position:absolute;
  inset-block:0;
  right:1em;                          /* match Popular/Accordion chevron line */
  display:inline-flex;
  align-items:center;
  font-size:1.1em;                    /* match accordion chevron size */
  transform:rotate(90deg);            /* closed -> â–¼ */
  opacity:.75;
  transition:transform .18s ease, opacity .18s ease;
}

/* open state driven by JS aria-expanded */
#listing-filter-value[aria-expanded="true"]::after{
  transform:rotate(0deg);             /* open -> â–¶ */
  opacity:.9;
}

/* Hide any count inside the FVB */
#listing-filter-value .vb-count{ display:none !important; }

/* guard so FVB fill wins even if a later shared rule exists */
#filters-inline #listing-filter-value{
  background: linear-gradient(#e5f0ff, #d9e9ff);
}

/* image-based icon inside the view filter button */
#view-filter img{ width:30px; height:30px; display:block; }  /* legacy, kept safe */

/* Hover/Focus/Active for FVB (keyboard + mouse) */
#listing-filter-value:hover{
  background: linear-gradient(#deebff, #cfe3ff);     /* a shade stronger */
  border-color: #5ea0fa;                             /* mid blue */
  box-shadow:
    0 1px 0 rgba(0,0,0,.05),
    0 2px 6px rgba(59,130,246,.18);
}

#listing-filter-value:active{
  background: linear-gradient(#cfe1ff, #c3daff);     /* pressed shade */
  transform: translateY(1px);                        /* tactile press */
  box-shadow:
    inset 0 1px 3px rgba(59,130,246,.18);            /* inner press */
}
#listing-filter-value:focus-visible{
  outline: 2px solid #3b82f6; outline-offset: 2px;   /* crisp focus */
}

/* FVB dropdown popover */
#fvb-popover{
  position: absolute;
  z-index: 100;                       /* above cards/buttons */
  margin-top: 4px;
  padding: 4px;
  min-width: 0;                    /* allow JS to control width exactly */
  width: auto;                     /* default; JS sets exact px width */
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 10px;                 /* slightly softer */
  box-shadow: 0 10px 24px rgba(2,8,23,.18); /* clearer elevation */
  max-height: min(260px, 40vh);       /* safer on small screens */
  overflow: auto;
  inset-inline-start: 0;              /* line up with FVB inside the row */
  overscroll-behavior: contain;       /* keep scroll contained */
  box-sizing: border-box; /* width includes padding + border */
}

/* options inside the popover */
#fvb-popover .fvb-option{
  display: block;
  width: 100%;
  text-align: start;                   /* RTL-safe */
  padding: 10px 12px;                  /* roomier tap target */
  border: 0;
  background: transparent;
  cursor: pointer;
  border-radius: 8px;
  font: inherit;
  color: #0f172a;
}

#fvb-popover .fvb-option:hover,
#fvb-popover .fvb-option.is-active{
  background: #f1f5f9;
}

#fvb-popover .fvb-option.is-selected{
  background: #eef6ff;
  outline: 1px solid #93c5fd;
  outline-offset: 0;
}

/* View-by crumbs: two-row layout; tidy spacing */
.vb-crumbs { display:block; line-height:1.25; }
.vb-row1   { display:block; white-space:nowrap; }
.vb-row2   { display:block; white-space:normal; }
.vb-cat    { display:inline-flex; align-items:center; gap:.35ch; }
/* .vb-sep color is set inline to match the Close button */

/* ===========================
   ğŸ” Search â€” unified styles
   (preserves your comment blocks, de-duplicated)
   =========================== */

/* ğŸ›ï¸ Theme vars (easy to tweak) */
:root{
  --search-border: #d6dbe1;
  --search-focus:  #5b8def;               /* alt focus color (no black) */
  --search-shadow: rgba(91,141,239,.15);  /* soft focus ring */
}

/* ğŸ“¦ Search container â€” full-width row */
#search-container {
  display: flex;
  justify-content: center;
  margin-block: 4px;                     /* vertical rhythm */
  margin-inline: var(--content-pad-x);   /* shared gutter for LTR/RTL */
}

/* Inner row: stretch; no fixed cap */
#search-container > div {
  display: flex;
  gap: 10px;
  align-items: center;
  flex: 1 1 auto;
  width: 100%;
  max-width: none;
  min-width: 0;
}

/* ğŸ“¦ Wrapper around input and clear button */
#search-left {
  position: relative;         /* anchor for the clear button */
  display: inline-flex;
  align-items: center;
  flex: 1 1 auto;
  min-width: 0;
  width: auto;
}

/* ğŸ§  Input */
#search {
  width: calc(100%);  /* +5â€“8px visual growth; adjust 6px as needed */
  margin-right: -6px;       /* keep layout stable; only the box extends */
  box-sizing: border-box;   /* ensure borders are included */

  height: 36px;
  /* top | right | bottom | left */
  padding: 8px 10px 8px 10px;  /* right = 10px, left = 10px */
  background: #fff;
  border: 1px solid var(--search-border, #d7dde4);
  border-radius: 6px;
  font-family: 'Poppins', system-ui, sans-serif;
  font-size: 16px;
  font-weight: 400;
  line-height: 1;
  outline: none;
}

/* When the user has typed, reserve room for the Ã— so text never sits under it */
#search:not(:placeholder-shown){
  padding-right: 2.25rem;     /* reserve only after input */
}

/* (you already have this) reveal the Ã— only when there is content */
#search:not(:placeholder-shown) + #clear-search{
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Optional: disable the browserâ€™s native search-cancel icon if type="search" is used */
input[type="search"]::-webkit-search-cancel-button{ -webkit-appearance: none; }

#search::placeholder { font-weight: 400; color: #666; opacity: 1; }

#search:focus,
#search:focus-visible {
  border-color: var(--search-focus, #7aa2ff);
  box-shadow: 0 0 0 3px var(--search-shadow, rgba(122,162,255,.2));
}

/* âŒ Clear / Remove button â€” shared visual style (search clear + favorites remove) */
#clear-search,
.clear-x {
  width: 24px;
  height: 24px;
  padding: 0;
  margin: 0;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  background: #fff;
  font-size: 12px;            /* bold X */
  font-weight: 700;
  line-height: 1;
  color: #e63946;
  cursor: pointer;
}

/* âŒ Clear button â€” positioned inside the search input (kept specific) */
#clear-search {
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  display: none;              /* JS toggles; CSS also reveals on value */
  z-index: 1;                 /* above input */
}

#clear-search:hover, .clear-x:hover { background: #f1f5f9; color: #334155; }
#clear-search:active { transform: translateY(-50%) scale(0.98); }

/* CSS-only reveal when the input has content */
#search:not(:placeholder-shown) + #clear-search {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Optional JS-coop: if your code toggles a wrapper class, honor it */
#search-left.has-value #clear-search {
  display: inline-flex;
}

/* keep fixed-size controls aligned in search row */
#search-container #view-filter,
#search-container #fav-button,
#search-container #here-button {
  flex: 0 0 auto;
}

/* center â­ between input and ğŸ¯ using only the row gap */
#search-container #fav-button { margin: 0; }
#search-container #here-button { margin: 0; }


/* ==============================
   ğŸ“œ Main content + scroll zone
   (aligned, de-duplicated, maintainable)
   ============================== */
   
/* Row that holds: [ "Filtered by:" ] [ value ] [ Filter button ] */
#filters-inline{
  display: flex;                        /* single line layout */
  align-items: center;                  /* vertical align */
  gap: .5rem;                           /* space between items */
  margin-block: 8px;                    /* vertical rhythm */
  margin-inline: var(--content-pad-x);  /* align with search gutter */
}

/* Shared box look (label only; value styles defined in unified FVB block) */
#listing-filter-label{
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  font-size: .95em;
  text-align: start;
  color: #475569;
  background: #f8fafc;
  border: 0;                   /* no border on label */
  border-radius: 6px;
  white-space: nowrap;
}

/* Let the value grow; visual styles stay in the unified FVB rules above */
#listing-filter-value{ flex: 1 1 auto; min-width: 0; }

/* Let the value grow to fill, label stays natural width */
#listing-filter-label{ flex: 0 0 auto; }
#listing-filter-value{ flex: 1 1 auto; min-width: 0; }

/* Keep the Filter button inline with the boxes (from your existing rules) */
#filters-inline #view-filter{ flex: 0 0 auto; margin: 0; }

/* Layout constants (edit to match your UI) */
:root {
  --header-h: 56px;          /* fixed header height */
  --bottom-band-h: 50px;     /* JS updates this at runtime */
  --end-gap: 72px;           /* small buffer so last row clears band */
  --stack-gap: 8px;          /* vertical spacing between blocks */
  --content-pad-x: 1em;      /* horizontal padding for content */
  --accordion-tail-gap: 24px;
}

/* ğŸ“œ Main content area and scroll zone above bottom band */
#main-content {
  display: flex;
  flex-direction: column;
  /* Full *visible* viewport height minus fixed bars.
     Uses var(--vh) (set via JS) for mobile URL bar correctness. */
  height: calc(var(--vh, 100vh) - var(--bottom-band-h) - var(--header-h));
  box-sizing: border-box;
  padding: 0 var(--content-pad-x);
  overflow: hidden; /* disable scrolling here; delegate to #locations-scroll */
}

/* The ONLY vertical scroller for the pageâ€™s content */
#locations-scroll {
  flex: 1 1 auto;
  min-block-size: 0;               /* allow scroller to shrink in flex */
  overflow-y: auto;
  overscroll-behavior-y: contain;
  /* overflow-anchor: auto; default when line below is removed */
  box-sizing: border-box;

  /* Keep content clear of fixed bars (top/bottom) + add visual end gap */
  padding-top: 0; /* first item sits flush under header (header is outside) */
  padding-bottom: calc(var(--bottom-band-h)
                      + env(safe-area-inset-bottom, 0px)
                      + var(--end-gap));
  scroll-padding-bottom: calc(var(--bottom-band-h) + var(--end-gap));

  /* Touch polish + stable layout on scrollbar show/hide */
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  scrollbar-gutter: stable both-edges;

  /* Stacked layout for Popular + Accordion sections */
  display: flex;
  flex-direction: column;
  gap: var(--stack-gap);
}

/* Remove unintended extra gaps at the very top/bottom of the list */
#locations-scroll > :first-child { margin-top: 0; }
#locations-scroll .accordion-section:first-child { margin-top: 0; }
#locations-scroll .accordion-section:last-child  { margin-bottom: 0; }

/* Your existing quick buttons block */
#quick-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 6px;
  max-width: 90%;
}

.hidden { display: none !important; }

h2 {
  font-size: 20px;
  font-weight: bold;
  margin: 0.5em 0 0.25em;
}

/* ğŸŸ¢ WhatsApp Button */
#whatsapp-link {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  color: #25d366;
  font-size: 22px;
  font-weight: bold;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  height: 40px; /* keeps it aligned with others */
}

#whatsapp-link .wa-icon {
  height: 22px;
  width: auto;
}

/* â™¿ Accessibility Button */
#accessibility-button {
  display: inline-block;
  background: none;
  border: none;
  color: inherit;
  font-size: 22px;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  border-radius: 0.5em;
}

#accessibility-button:focus,
#accessibility-button:focus-visible {
  outline: none;
}

#locations h3 {
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  margin: 1em 0 0.5em 0;
}

#quick-buttons-wrapper {
  display: flex;
  justify-content: center;
  overflow-y: auto;
  max-height: 84px;
  margin-bottom: 1em;
  scroll-behavior: smooth;
}

.alert-button {
  background-color: #e63946;
  color: white;
  white-space: normal;
  text-align: center;
  line-height: 1.4;
  padding: 0.75em 1em;
  font-size: 20px;
  pointer-events: none;
  overflow-wrap: break-word;
  word-break: break-word;
  width: 100%;
  box-sizing: border-box;
}

.alert-box {
  background-color: #e63946;
  color: white;
  text-align: center;
  line-height: 1.5;
  padding: 0.75em 1em;
  font-size: 18px;
  width: 80%;
  max-width: 400px;
  margin: 1em auto;
  border-radius: 0.5em;
  box-sizing: border-box;
  white-space: pre-wrap;
  overflow-wrap: break-word;
  word-break: break-word;
  display: block;
}

.alert-card {
  background-color: #e63946;
  color: white;
  width: 90%;
  max-width: 320px;
  margin: 0.5em auto;
  border-radius: 0.5em;
  padding: 0.75em 1em;
  box-sizing: border-box;
  text-align: left;
  font-size: 18px;
  line-height: 1.5;
}

.alert-title {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  margin-bottom: 0.5em;
  font-size: 18px;
}

.alert-timestamp {
  font-weight: normal;
  font-size: 16px;
  color: #fdd;
  white-space: nowrap;
}

.alert-body {
  font-weight: normal;
  white-space: normal;
  word-break: break-word;
}

.alert-card.empty {
  background-color: #f0f0f0;
  color: #444;
  font-style: italic;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ High Contrast Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body.high-contrast {
  background-color: #111;
  color: #fff;
  font-size: 110%;
}
/* sub-group count pill stays readable in HC */
body.high-contrast .subheader[data-count]::before{
  background-color: rgba(255,255,255,.16); /* light-on-dark */
  color: #e5e7eb;                          /* readable text */
  border: 1px solid rgba(255,255,255,.22); /* subtle edge for AA */
}

/* Sub-group containers + headers (ensure dark surface) */
body.high-contrast .sub-group,
body.high-contrast .subgroup,
body.high-contrast .subgroup-items,
body.high-contrast .subheader {
  background-color: #111 !important; /* same panel tone */
  color: #fff !important;
  border-color: #666 !important;
}

/* General Buttons */
body.high-contrast button,
body.high-contrast .quick-button,
body.high-contrast .accordion-button,
body.high-contrast .group-header-button {
  background-color: #222 !important;
  color: #fff !important;
  border: 1px solid #888 !important;
}

body.high-contrast button:hover,
body.high-contrast .quick-button:hover,
body.high-contrast .accordion-button:hover,
body.high-contrast .group-header-button:hover {
  background-color: #333 !important;
}

/* Accordion Inner Group Buttons */
body.high-contrast .group-buttons .quick-button,
body.high-contrast .location-button,
body.high-contrast .subgroup-items .quick-button,
body.high-contrast .subgroup-items .location-button {
  background-color: #222 !important;
  color: #fff !important;
  border: 1px solid #666 !important;
}

body.high-contrast .group-buttons .quick-button:hover,
body.high-contrast .location-button:hover,
body.high-contrast .subgroup-items .quick-button:hover,
body.high-contrast .subgroup-items .location-button:hover {
  background-color: #333 !important;
}

/* â­ Special Case: Popular Group */
body.high-contrast .group-header-button[data-group="group.popular"],        /* ğŸ’¥ Popular replaced*/
body.high-contrast .quick-button[data-group="group.popular"] {              /* ğŸ’¥ Popular replaced*/
  background-color: rgba(255, 193, 7, 0.2) !important;
  color: #fff !important;
  border-color: #ffc107 !important;
}

body.high-contrast .quick-button[data-group="group.popular"]:hover {        /* ğŸ’¥ Popular replaced*/
  background-color: rgba(255, 193, 7, 0.3) !important;
}

/* Optional: Large Text */
body.large-text {
  font-size: 1.15em;
}

/* ------------------------------
   General Icon Styles
   ------------------------------ */

/* Inline icons sized with text flow */
.icon, .icon-img, .icon-svg {
  width: 1.2em;
  height: 1.2em;
  vertical-align: middle;
  display: inline-block;
  line-height: 1;
}

/* Square icon button (emoji/img/svg) â€” use for â­/âœ©/â„¹ï¸/ğŸ“¤/ğŸ‰ buttons */
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;     /* matches clear-x box */
  height: 28px;
  line-height: 1;  /* no extra leading */
  font-size: 18px; /* tweak if you want tighter */
  vertical-align: middle;
}

/* ------------------------------
   Community Zone Buttons
   ------------------------------ */

.community-button {
  display: inline-block;
  background: #e6f7fb;
  color: #222;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 0.6em 1em;
  margin: 0.4em;
  font-size: 1em;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.community-button:hover {
  background-color: #e6e6e6;
  border-color: #ccc;
}

.community-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 1em;
}


/* ------------------------------
   Social Link Buttons
   ------------------------------ */

/* Circular social button container (e.g., for Twitter, GitHub, etc.) */
.social-link {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 3em;
  height: 3em;
  margin: 0.5em;
  border-radius: 50%;
  background-color: #f1f1f1;
  transition: background-color 0.2s ease;
}

.social-link:hover {
  background-color: #ddd;
}

/* Icon inside social-link button */
.social-link img {
  width: 24px;
  height: 24px;
}


/* ------------------------------
   Standalone Social Icons
   ------------------------------ */

/* Container style */
.social-link-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1.25em;
  margin-top: 1em;
}

/* Each icon wrapper */
.social-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background-color: #f1f1f1;
  transition: background-color 0.2s ease;
}

/* Icon image inside */
.social-icon img {
  width: 28px;
  height: 28px;
  transition: transform 0.2s ease;
}

/* Hover effect (desktop only) */
@media (hover: hover) {
  .social-icon:hover {
    background-color: #e0e0e0;
  }

  .social-icon img:hover {
    transform: scale(1.2);
  }
}

/* Responsive grid for flag/language selection */
.flag-list {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* Max 4 per row */
  gap: 1em;
  justify-items: center;
  margin-top: 1em;
}

/* Flag icon inside the grid */
.flag-list img {
  width: 40px;
  height: 40px;
  border-radius: 4px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}

/* Desktop hover only */
@media (hover: hover) {
  .flag-list img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
  }
}

/* Disabled flag style (subtle dim with grayscale) */
.flag-list img.disabled {
  opacity: 0.35;
  filter: grayscale(100%);
  pointer-events: none;
  cursor: default;
}

/* â›” Removed selected-flag styling */
/* Was used to show blue border for active language â€” removed by user request */
.flag-list img.selected-flag {
  border: none !important;
  padding: 0 !important;
  box-shadow: none !important;
  background: none !important;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Modal containers â€” unified base
   Applies the same shell to every app modal; visibility is
   controlled by toggling the .hidden class in JS.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Modal containers â€” unified base */
:root {
  --modal-pad: 2em;
  --modal-backdrop: rgba(0, 0, 0, 0.25);
  --modal-blur: 1px; /* readable text behind */
}

#my-stuff-modal,
#help-modal,
#language-modal,
#social-modal,
#alert-modal,
#pinned-modal,
#share-location-modal,
#donation-modal {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  padding: var(--modal-pad);
  background: var(--modal-backdrop);
  /* subtle blur; keeps chars readable behind */
  -webkit-backdrop-filter: blur(var(--modal-blur));
  backdrop-filter: blur(var(--modal-blur));
}

#my-stuff-modal:not(.hidden),
#help-modal:not(.hidden),
#language-modal:not(.hidden),
#social-modal:not(.hidden),
#alert-modal:not(.hidden),
#pinned-modal:not(.hidden),
#share-location-modal:not(.hidden),
#donation-modal:not(.hidden) {
  display: flex;
}

/* Share Location compact tweak */
#share-location-modal { padding: 1em; }

/* Keep these inner rules */
#share-location-modal .modal-body { text-align: center; }
#share-location-coords {
  font-family: monospace;
  font-size: 1.1rem;
  margin: 0.75em 0;
  text-align: center;
}
#share-location-modal .modal-footer,
#share-location-modal .modal-actions { margin-top: 1.5em; }

/* Help: country select â€” taller, centered, no overflow */
#help-modal #emg-country{
  display:block;                     /* layout */
  width:min(100%, 320px);            /* clamp width inside card */
  margin:0 auto;                     /* center within the body */
  height:36px;                       /* readable tap target */
  padding:6px 36px 6px 12px;         /* room for arrow */
  font-size:16px;
  line-height:1.2;
  border:1px solid #e0e0e0;
  border-radius:8px;
  background:#fff;
  box-sizing:border-box;
  appearance:none; -webkit-appearance:none; -moz-appearance:none; /* custom-stylable */
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 6'><path d='M1 1l4 4 4-4' fill='none' stroke='%23666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat:no-repeat;
  background-position:right 10px center;
  background-size:14px 14px;
}
/* hide legacy arrow if present */
#help-modal #emg-country::-ms-expand{ display:none; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main Modal Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Defines scrollable vertical layout â€” structure only; visual layout is handled by layout modifiers (e.g. .modal-action) */
.modal-content {
  display: flex;                              /* âœ… Enables vertical stacking of children */
  flex-direction: column;                     /* âœ… Top-to-bottom content flow */
  background: white;                          /* âœ… White modal background (used unless overridden) */
  border-radius: 0.5em;                       /* âœ… Rounded corners for visual clarity */
  padding: 1.5em;                             /* âœ… Inner spacing for typical modals */

  width: min(95vw, 720px);                    /* âœ… Responsive width: stretches up to a limit */
  max-height: calc(100vh - 6em);              /* âœ… Prevents modal from touching screen edges vertically */
  overflow-y: auto;                           /* âœ… Enables scroll inside modal body if content overflows */

  z-index: 1001;                              /* âœ… Positions above backdrop layer */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25); /* âœ… Drop shadow gives depth to modal card */
  font-size: 18px;                            /* âœ… Base font size inside modal */
  line-height: 1.5;                           /* âœ… Ensures readable spacing for multi-line text */
  box-sizing: border-box;                     /* âœ… Includes padding within declared width */
}

/* ğŸ§¾ Paragraph styling inside modals for consistent spacing and readability */
/* Applies to direct <p> elements inside any modal-content container */
.modal-content p {
  font-size: 14px;           /* âœ… Smaller, modal-friendly text size */
  margin-bottom: 1em;        /* âœ… Creates vertical spacing between text blocks */
  text-align: center;        /* âœ… Center-align for modals like Share or Confirm */
}

/* ğŸ Styled Stripe donation buttons inside modal */
/* Applies only to buttons used for Stripe purchases */
.modal-content form {
  display: flex;             /* âœ… Ensures centering horizontally */
  justify-content: center;  /* âœ… Centers button in modal */
  margin-bottom: 1.2rem;     /* âœ… Adds space below each button */
}

/* âœ… Add spacing between each donation button form */
.modal-content form + form {
  margin-top: 0.5rem;        /* âœ… Adds vertical space between stacked forms */
}

.donation-note-wrapper {
  text-align: center;
  margin-bottom: 1.4rem;
}

.donation-note {
  font-size: 15px;
  font-weight: 500;
  color: #444;
  line-height: 1.5;
}

.donation-options {
  display: flex;
  flex-direction: column;
  align-items: center;  /* âœ… Center buttons horizontally */
  gap: 0.6rem;          /* âœ… Space between buttons */
  margin-bottom: 1.4rem;
}

.smiley {
  display: block;
  margin-top: 4px;
  font-size: 16px;
  color: #666;
}

#stripe-loader {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.96); /* Slightly stronger overlay */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-family: "Raleway", sans-serif;
  font-size: 1rem;
  color: #333;
  z-index: 9999;
  pointer-events: all;             /* Ensures it blocks interaction */
  transition: opacity 0.3s ease;   /* Smooth fade if animated */
}

#stripe-loader.hidden {
  opacity: 0;
  pointer-events: none;
}

.stripe-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #8fd19e;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}


.modal-content button[type="submit"] {
  width: 80%;                                 /* âœ… Uniform button width (responsive) */
  padding: 0.9rem 1.4rem;                     /* âœ… Comfortable padding */
  font-size: 16px;                            /* âœ… Slightly smaller text than modal body */
  font-weight: 600;                           /* âœ… Strong readable label */
  border: none;                               /* âœ… Clean borderless look */
  border-radius: 10px;                        /* âœ… Rounded corners to match modal style */
  background: linear-gradient(to right, #ffeac4, #fff5e5); /* âœ… Soft pastel background */
  color: #5a3e00;                             /* âœ… Warm, friendly text color */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);  /* âœ… Subtle shadow for depth */
  cursor: pointer;                            /* âœ… Clickable feel */
  transition: all 0.2s ease;                  /* âœ… Smooth hover animation */
}

.modal-content button[type="submit"]:hover {
  background: #ffe1b0;                        /* âœ… Slight darkening on hover */
  transform: translateY(-2px);                /* âœ… Subtle lift on hover */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Scrollable Content Area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Ensures long content inside body scrolls properly */
.modal-body {
  overflow-y: auto;
  flex-grow: 1;
  padding: 0;              /* â›” Removed padding to avoid inset scrollbar */
  scrollbar-gutter: stable; /* âœ… Keeps scrollbar flush right without shifting content */
}

/* Inner wrapper for proper spacing inside modal content */
.modal-body-inner {
  padding: 1.2rem;         /* âœ… Provides inner spacing without affecting scrollbar edge */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Headers & Top Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Close sits in-row; header can wrap without shifting alignment */
.modal-top-bar{
  position: sticky; top: 0; z-index: 20; /* sits above in-modal content like slider arrows */
  display: flex; align-items: flex-start; justify-content: space-between; gap: 12px;
  padding: 16px 16px 12px 16px;  /* in-row Ã— â†’ no right reserve */
  margin: 0 0 8px 0;
  background: #fff;
  border-bottom: 1px solid rgba(0,0,0,.08);
}

.modal-top-bar h2{
  flex: 1 1 auto;
  font-size: 20px;
  line-height: 1.2;
  margin: 0;
}

/* Winner: in-row + sticky header; this is the authoritative modal Ã— rule */
/* Adjust font-size here to control the modal Ã— across the app */
.modal .modal-top-bar .modal-close{
  appearance: none; -webkit-appearance: none;
  position: static;               /* in-row; participates in flex */
  margin-left: auto;              /* push to right edge */
  align-self: flex-start;         /* align with first line */
  background: transparent; border: 0; cursor: pointer;
  color: #d11;
  font-size: 30px;                /* your chosen Ã— size */
  line-height: 1;
  border-radius: 8px;
  padding: 2px 6px;               /* keep tap target */
}
.modal .modal-top-bar .modal-close:hover{ color:#a00; }
.modal .modal-top-bar .modal-close:focus-visible{ outline:2px solid currentColor; outline-offset:2px; }

/* My Stuff: center title; keep Ã— on the same top line (right) */
#my-stuff-modal .modal-top-bar{
  display: grid; grid-template-columns: 1fr auto 1fr; align-items: flex-start; gap: 12px;
  /* padding/background/border inherit from base block above */
}
#my-stuff-modal .modal-top-bar h1,
#my-stuff-modal .modal-top-bar h2{
  grid-column: 2; justify-self: center; text-align: center;
  margin: 0; line-height: 1.2;  /* compact first line */
}
#my-stuff-modal .modal-top-bar .modal-close{
  position: static; grid-column: 3; justify-self: end; align-self: flex-start;
  margin-left: 0;  /* flex-only push not used in grid */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Footer Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Shared footer layout for modals: My Stuff, Share, Alert, Confirm, Resolved, etc. */
.modal-footer {
  position: sticky; bottom: 0; z-index: 2; /* pinned inside the scroller */
  display: flex; justify-content: center; align-items: center;
  margin-top: auto;
  padding: 0.75em 1em 0.5em;
  border-top: 1px solid rgba(0, 0, 0, 0.08);
  background: #f5f5f5;        /* solid bar: body text no longer shows through */
  backdrop-filter: none;      /* keep it crisp instead of translucent blur */
  gap: 1em; flex-wrap: wrap;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Footer Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Used in info-type modals like "My Stuff" with a neutral footer action */
.modal-footer-button {
  background: #d1e0fe;
  color: #0f172a;
  font-weight: 500;
  font-size: 0.95rem;
  padding: 0.7em 1.25em;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: background 0.2s ease, transform 0.1s ease;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.5em;
  text-align: left;
}

.modal-footer-button:hover {
  background: #1667cc;
  transform: translateY(-1px);
}

/* Footer button inside modal-footer container */
.modal-footer .modal-footer-button {
  width: auto;
  align-self: center; /* tidy alignment */
}

/* compact CTA bar: emoji-only buttons; labels stay for SR */
.cta-compact .modal-footer-button{
  width:44px; height:44px;           /* 44px tap target */
  padding:0;                          /* center emoji */
  border-radius:12px;
  display:inline-flex; align-items:center; justify-content:center;
  font-size:20px;                     /* emoji size */
  line-height:1;                      /* prevent emoji baseline shift */
  -webkit-tap-highlight-color:transparent; /* cleaner tap on iOS */
  touch-action:manipulation;          /* faster taps */
  transition:transform .06s ease, box-shadow .12s ease, background-color .12s ease;
}
.cta-compact .modal-footer-button:hover{ transform:translateY(-1px); }
.cta-compact .modal-footer-button:active{ transform:translateY(0); box-shadow:0 0 0 2px rgba(0,0,0,.06) inset; }

/* keyboard focus ring */
.cta-compact .modal-footer-button:focus-visible{
  outline:2px solid #1a73e8;         /* app accent */
  outline-offset:2px;
}

/* visually hide label text, keep for assistive tech */
.cta-compact .modal-footer-button .cta-label{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}

/* CTA icon size for image-based buttons (e.g., Waze) */
.cta-compact .modal-footer-button .cta-icon{
  width:20px; height:20px; display:block;
}

/* high-contrast support */
body.high-contrast .cta-compact .modal-footer-button{
  background:#222 !important;
  color:#fff !important;
  border:1px solid #888 !important;
}

/* LPM: rating row (emoji radios) */
.lpm-rating{
  margin:.75em 0 0;
  display:flex;
  flex-direction:column;      /* stack hint UNDER the row */
  align-items:center;         /* center horizontally */
  justify-content:flex-start; /* keep top-aligned */
}

.lpm-rating .rate-row{
  display:flex;               /* center the 5 emojis */
  gap:8px;
  align-items:center;
  justify-content:center;
  margin:0;                   /* no extra offset */
}

.lpm-rating .rate-btn{
  width:36px; height:36px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid #e0e0e0; border-radius:10px;
  background:#f8f8f8; font-size:20px; line-height:1;
  cursor:pointer;
  transition:background .15s ease, box-shadow .15s ease, border-color .15s ease;
}

.lpm-rating .rate-btn:hover{ background:#f1f1f1; }
.lpm-rating .rate-btn[aria-checked="true"]{
  background:#e8f0fe; border-color:#1a73e8;
  box-shadow:0 0 0 2px rgba(26,115,232,.15) inset;
}

.lpm-rating .rate-hint{
  margin-top:6px;             /* show under the row */
  font-size:.9rem; opacity:.75;
}

body.high-contrast .lpm-rating .rate-btn[aria-checked="true"]{
  background:#333; border-color:#fff;
  box-shadow:0 0 0 2px rgba(255,255,255,.3) inset;
}

.lpm-rating .rate-btn[disabled]{
  opacity:.55; cursor:default; pointer-events:none;
}

/* QR modal: emoji-only CTAs */
.qr-ctas{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-top:12px;
}
.qr-cta{
  width:44px; height:44px;           /* comfortable tap target */
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid #e0e0e0;
  border-radius:12px;
  background:#f8f8f8;
  font-size:22px; line-height:1;     /* emoji size */
  cursor:pointer;
  transition:background .15s ease, box-shadow .15s ease, border-color .15s ease, transform .06s ease;
}
.qr-cta:hover{ background:#f1f1f1; transform:translateY(-1px); }
.qr-cta:active{ transform:translateY(0); box-shadow:0 0 0 2px rgba(0,0,0,.06) inset; }
.qr-cta:focus-visible{ outline:2px solid #1a73e8; outline-offset:2px; }

/* high-contrast */
body.high-contrast .qr-cta{
  background:#222; color:#fff; border-color:#888;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LPM tweaks (no new classes) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* push â‹® to the right */
#lpm-overflow{
  margin-left:auto; /* ğŸ¯ | ğŸ“… | ğŸ”³ | â€”â€” space â€”â€” | â‹® */
}

/* secondary actions container under the main row */
#lpm-secondary-actions{
  flex-basis:100%;   /* clean break onto new line */
  display:none;      /* hidden until â‹® toggles */
  margin-top:.5em;
  gap:.5em;
}

/* reveal when active */
#lpm-secondary-actions.is-open{
  display:flex;
  flex-wrap:wrap;    /* wrap gracefully on narrow screens */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LPM Image Slider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Container within .location-media */
/* fixed box + crossfade (no layout shift) */
.lpm-slider{
  position:relative;
  width:100%;
  aspect-ratio:1/1;
  border-radius:8px;
  overflow:hidden;
  box-sizing:border-box;
  padding-top:8px;   /* keep top breathing room for rounded corners */
}
.lpm-track{
  position:relative;
  width:100%;
  height:100%;
}

/* two-image buffer */
.lpm-img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  opacity:0;
  transition:opacity 160ms ease;
}
.lpm-img.active{ opacity:1; }

/* (optional) single-slide fallback */
.lpm-slide{
  display:none;
  width:100%;
  height:auto;
  object-fit:cover;
}
.lpm-slide.active{ display:block; }

/* Nav buttons */
.lpm-prev,.lpm-next{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  border:0;
  background:rgba(0,0,0,.6);
  color:#fff;
  font-size:2rem;
  line-height:1;
  padding:0 .5rem;
  cursor:pointer;
  border-radius:6px;
  z-index: 5; /* below .modal-top-bar (z-index:20) but above the image itself */
}

.lpm-prev{ left:10px; }
.lpm-next{ right:10px; }
.lpm-prev:hover,.lpm-next:hover{ background:rgba(0,0,0,.6); }
.lpm-prev:focus,.lpm-next:focus{ outline:2px solid rgba(255,255,255,.6); }

/* LPM: header flush + keep content from sliding underneath */
#location-profile-modal .modal-content{
  padding-top:0;                 /* header touches the top edge */
}
#location-profile-modal .modal-top-bar{
  position:sticky; 
  top:0; 
  z-index: 50;  /* ensure header stays above slider arrows */
  position: sticky;
  top: 0;
  /* create own stacking context to dominate slider buttons */
  isolation: isolate;
  background:#fff;               /* solid cover while sticky */
}
#location-profile-modal .modal-body{
  margin-top:12px;               /* small buffer under header (like other modals) */
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Body Action Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Used in body-action modals like "Share" */
.modal-body-button {
  background: #d1e0fe;
  color: #0f172a;
  font-weight: 500;
  font-size: 0.95rem;
  padding: 0.5em 1em;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: background 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  min-width: 120px;
  max-width: 100%;
  align-self: center;
}

.modal-body-button:hover {
  background: #c6dafe;
  transform: translateY(-1px);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Body Text Styles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-body .muted {
  font-size: 0.9em;
  color: #666;
  margin-bottom: 0.5em;
}

.modal-body .location-coords {
  font-size: 1.1em;
  margin-bottom: 1em;
  font-family: monospace;
}

/* Coordinates display formatting */
.modal-body .location-coords {
  font-size: 1.1em;
  margin-bottom: 1em;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ My Stuff Menu Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Styled like grouped quick-buttons, but tailored for modal menu use */
/* Scalable base: can later be driven by dynamic JSON like group-buttons */

.my-stuff-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  margin: 0.5em 0;
  width: 100%;
  background: #f8f8f8;
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  font-family: inherit;
  font-size: 1rem;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s ease;
}

.my-stuff-item:hover {
  background: #f1f1f1;
}

.my-stuff-item .icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

/* label: allow wrapping within flex so text never spills */
.my-stuff-item .label {
  display: flex;
  flex-direction: column;
  font-weight: 600;
  line-height: 1.2;
  flex: 1 1 auto;          /* use remaining row space */
  min-width: 0;            /* prevent flex overflow */
  overflow-wrap: anywhere; /* wrap mid-length words */
  word-break: break-word;  /* safety for long tokens */
}

.my-stuff-item .label small {
  font-weight: 400;
  opacity: 0.7;
  font-size: 0.85rem;
}

/* My Stuff modal: header flush to top, scrollbar on card edge */
/* Also remove bottom padding so sticky footer sits on the card edge (no white band). */
#my-stuff-modal .modal-content{
  padding-top: 0;    /* attach sticky header to the top edge */
  padding-right: 0;  /* scrollbar flush right */
  padding-left:  0;  /* keep column centered; no side padding on scroller */
  padding-bottom: 0; /* scroller ends at card edge â†’ footer sticks to bottom */
}

/* On small screens, pull the My Stuff card slightly down from the very top
   so its top margin feels like LPM: not glued to the screen edge. */
@media (max-width: 640px){
  #my-stuff-modal .modal-content{
    margin-top: 30px; /* gentle top gap only on mobile */
  }
}

/* no mid-gutter on the scroll container */
#my-stuff-modal .modal-body{
  padding: 0;
}

/* restore inner spacing for content (keeps column visually centered) */
#my-stuff-modal .modal-body-inner{
  padding: 0 1.5em 1.5em 1.5em;  /* symmetric side padding */
  box-sizing: border-box;
  min-width: 0;
}

/* label wrapping (prevents text spill on narrow screens) */
.my-stuff-item .label{
  display: flex;
  flex-direction: column;
  font-weight: 600;
  line-height: 1.2;
  flex: 1 1 auto;
  min-width: 0;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ No-Miss Info View â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.no-miss-section {
  padding: 1rem;
  font-size: 0.95rem;
  line-height: 1.6;
}

.no-miss-section .section-header {
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 1rem;
}

.no-miss-section .section-header small {
  display: block;
  font-weight: 400;
  font-size: 0.85rem;
  opacity: 0.7;
  margin-top: 0.2rem;
}

.no-miss-block {
  margin-bottom: 1rem;
}

.no-miss-title {
  font-weight: 600;
  margin-bottom: 0.3rem;
}

.no-miss-body {
  font-weight: 400;
  opacity: 0.85;
}

.no-miss-thanks {
  margin-top: 1.5rem;
  font-weight: 500;
  text-align: center;
  font-size: 1rem;
}

/* Inline SVG logo icon replacement for ğŸ‘¤ */
.inline-icon.logo-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  vertical-align: text-bottom;
  background: url('/assets/logo-icon.svg') no-repeat center center;
  background-size: contain;
}

/* WhatsApp */
.wa-text {
  font-weight: normal;
  font-size: 20px;
  color: #128c7e;
}

button:hover {
  background-color: rgba(0, 0, 0, 0.08);
  transition: background-color 0.2s ease;
}

/* Accordion Section */
.accordion-section {
  margin-top: 8px;
  scroll-margin-top: var(--header-h);
}

.accordion-body {
  display: none;
  padding: 0.5em 1em;
  border: 1px solid #e0e0e0;
  border-top: none;
  background-color: #fafafa;
}

/* spacer so last accordion group clears the bottom band */
#accordion::after {
  content: "";
  display: block;
  height: calc(var(--bottom-band-h) + var(--accordion-tail-gap));
}

.accordion-button {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 10px 16px;
  font-size: 16px;
  font-weight: bold;
  color: black;
  background-color: white;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  box-sizing: border-box;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin-bottom: 0.5em;
}

.accordion-button > span {
  margin-left: 1em;
}

/* Optional spacing between stacked headers */
.accordion-button + .accordion-button {
  margin-top: 0.5em;
}

/* Base style for ALL quick buttons */
.quick-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: white;
  border: 1px solid transparent;
  color: black;
  cursor: pointer;
  white-space: nowrap;
  text-align: center;
  line-height: 1;
  flex-shrink: 0;
  box-sizing: border-box;
  margin: 4px 6px;
  transition:
    background-color 0.2s ease,
    transform 0.1s ease,
    box-shadow 0.1s ease,
    border-color 0.2s ease;
}

.quick-button:hover {
  background-color: var(--group-color, #f5f5f5);
  border-color: var(--group-color-ink, #999);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* Optional: softer hover background for Populars only */
.quick-button.popular-button:hover {
  background-color: #fff3e5;
  border-color: #e36700;
}

/* Group header buttons (category titles like "Social", "Stages", etc.) */
.group-header-button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5em;
  height: 2.8em;
  padding: 0 1em;
  font-size: 18px;
  border-radius: 6px;
  border: 1px solid #ddd;
  background: none;
  color: inherit;
  width: 100%;
  text-align: left;
  cursor: pointer;
  margin: 0;
  transition: border-color 0.2s ease, background-color 0.2s ease;
}

.group-header-button .header-title {
  flex-grow: 1;
  text-align: left;
}

.group-header-button .header-meta {
  font-size: 0.9em;
  opacity: 0.7;
}

.group-header-button .header-arrow {
  font-size: 1.1em;
  opacity: 0.6;
}

.group-header-button:hover {
  border-color: var(--group-color-ink, #999);
  background-color: var(--group-color, #f9f9f9);
}

/* closed = down, open = right */
.group-header-button .header-arrow::after{
  content:"â–¸";
  display:inline-block;
  transform:rotate(90deg);
  transition:transform .25s ease;
}
.group-header-button.open .header-arrow::after{
  transform:rotate(0deg);
}

.group-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 4px 6px; /* row gap = 4px, column gap = 6px */
  padding: 0.2em 0 0.4em;
  margin-top: 0.25em;
}

.group-buttons.hidden {
  display: none;
}

/* Unified shape & spacing */
.group-buttons button.quick-button[data-group]:not([data-group="Alerts"]):not([data-group="Social"]) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: var(--group-color, white); /* was: white */
  color: black;
  cursor: pointer;
  white-space: nowrap;
  line-height: 1;
  flex-shrink: 0;
  box-sizing: border-box;
  margin: 2px 4px;
  transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.1s ease;
}

/* Hover styling */
.group-buttons button.quick-button[data-group]:not([data-group="Alerts"]):not([data-group="Social"]):hover {
  background-color: var(--group-color, #f9f9f9); /* was: #f9f9f9 */
  border-color: var(--group-color-ink, currentColor);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* ğŸ¯ Location/group child buttons inside accordion or popular sections */
.location-button {
  border: 1px solid var(--group-color-ink, transparent); /* was: transparent */
  border-radius: 6px;
  padding: 6px 12px;
  font-weight: 500;
  background: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.location-button:hover {
  box-shadow: 0 0 0 2px var(--group-color-ink, currentColor); /* was: currentColor */
  background-color: var(--group-color, #fafafa);              /* was: #fafafa */
}

/* sub headers */
.subheader {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: 6px 8px 4px 16px;   /* extra indent */
  font-weight: 600;            /* semi-bold subs */
  cursor: pointer;
  user-select: none;
}

/* chevron â€“ show only if there are items (needs Chrome/Edge/Safari :has) */
/* closed = down, open = right */
.subheader:has(+ .subgroup-items:not(:empty))::after{
  content:"â–¸";
  margin-left:auto;
  opacity:.6;
  transform:rotate(90deg);
  transition:transform .18s ease,opacity .18s ease;
}
.subheader.is-open:has(+ .subgroup-items)::after{
  transform:rotate(0deg);
  opacity:.8;
}

/* optional count pill pulled from data-count */
.subheader[data-count]::before {
  content: attr(data-count);
  font-weight: 600;
  font-size: 11px;
  line-height: 1;
  padding: 3px 6px;
  border-radius: 999px;
  background: rgba(0,0,0,.08);
  color: rgba(0,0,0,.65);
}

/* wrapper that holds the subâ€™s buttons */
.subgroup-items {
  padding: 6px 0 8px 24px;     /* nested indent under the sub */
}

/* collapsed */
.subgroup-items.is-collapsed { display: none; }

/* â­ Favorites â€” neutral grey button (fill + hover) */  /* 2-line: unify with ğŸ¯ look */
#fav-button{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:36px;
  padding:8px 14px;
  font-size:16px;
  font-weight:bold;
  border-radius:6px;
  background-color:#f1f5f9;                 /* grey fill */
  border:1px solid var(--search-border, #d6dbe1);
  color:black;
  cursor:pointer;
  line-height:1;
  white-space:nowrap;
  box-sizing:border-box;
  transition:background-color .2s ease, border-color .2s ease;
}
#fav-button:hover{
  background-color:#e2e8f0;                 /* slightly darker grey */
  border-color:var(--search-border, #d6dbe1);
}

/* ğŸ¯ Share location â€” neutral grey button to match â­ */  /* 2-line: remove red hover */
#here-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 6px;
  background-color: #f1f5f9;                /* grey fill */
  border:1px solid var(--search-border, #d6dbe1);
  color: black;
  cursor: pointer;
  line-height: 1;
  white-space: nowrap;
  box-sizing: border-box;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin-left: 0;
}
#here-button:hover {
  background-color: #e2e8f0;                /* slightly darker grey */
  border-color: var(--search-border, #d6dbe1);
}

#search-box {
  font-size: 16px;
  font-weight: bold;
  padding: 8px 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
  line-height: 1;
  height: 36px;
  box-sizing: border-box;
  background-color: white;
  vertical-align: middle;
}

#search-box:focus {
  border-color: #888;
  box-shadow: 0 0 0 2px rgba(0,0,0,0.05);
}

#alert-indicator {
  font-size: 20px;
  cursor: pointer;
  padding: 6px 10px;
  margin-left: 8px;
  border-radius: 6px;
  border: 1px solid #ff4d4f;
  background-color: white;
  color: #ff4d4f;
  font-weight: bold;
  line-height: 1;
  transition: background-color 0.3s ease, opacity 0.3s ease;
}

/* Flashing red effect */
.flashing-alert {
  animation: flash-alert 1s infinite;
}

@keyframes flash-alert {
  0%, 100% { background-color: white; }
  50%      { background-color: #ffe6e6; }
}

#alert-indicator.hidden {
  display: none;
}

/* ğŸ“ Bottom Band Layout */
#bottom-band {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px; /* reduced from 60px */
  background: #fff;
  border-top: 1px solid #ccc;
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: 999;
  box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.1);
}

/* ğŸ›ï¸ Unified Bottom Band Button Styles */
#bottom-band button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: inherit;
  font-size: 20px; /* slightly smaller to match reduced band height */
  line-height: 1;
  cursor: pointer;
  padding: 0;
  border-radius: 0.5em;
  height: 34px; /* reduced from 40px */
  width: 34px;  /* keep square */
}

#bottom-band button:hover {
  background-color: rgba(0, 0, 0, 0.05);
  transition: background-color 0.2s ease;
}

@keyframes reveal-scroll-space {
  0%   { transform: translateY(0); }
  10%  { transform: translateY(-48px); }  /* pull up */
  70%  { transform: translateY(-48px); }  /* hold position */
  100% { transform: translateY(0); }      /* release */
}

.scroll-hint {
  animation: reveal-scroll-space 2.8s ease-out;
}

.alert-block {
  padding: 1em 0;
}

.alert-message {
  text-align: center;
  margin-bottom: 0.5em;
}

.fade-out {
  opacity: 0;
  transition: opacity 0.5s;
}

.alert-summary {
  border-top: 1px solid #1b8e0d; /* soft green */
  margin-top: 1em;
  padding-top: 0.75em;
  text-align: center;
  font-size: 0.85em;
  color: #444;
  opacity: 0.85;
}

.community-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 12px 0;
}

#locations {
  margin-top: 1em;
}

.quick-buttons-wrapper {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0px;
  max-height: calc(2 * (36px + 8px)); /* 2 rows: height + vertical margin */
  overflow-y: auto;
  scroll-behavior: smooth;
}

.quick-buttons-wrapper::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 16px;
  pointer-events: none;
  background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));
}

.section-spacer {
  height: 1.0em;
}
/* Placeholder message for empty states */
.empty-placeholder {
  text-align: center;
  padding: 2em 1em;
  color: #888;
  font-style: italic;
  font-size: 16px;
  line-height: 1.6;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Toast Notification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* single instance; header + red Ã— close */
.toast{
  position:fixed;
  bottom:33vh; /* one-third from bottom */
  left:50%;
  transform:translateX(-50%) translateY(20px);
  background:#fff;
  color:#333;
  padding:14px 16px 16px;
  border-radius:12px;
  font-size:17px;
  font-weight:500;
  font-family:inherit;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  z-index:10000;
  opacity:0;
  pointer-events:auto;
  transition:opacity .4s ease, transform .4s ease;
  max-width:min(92vw, 420px);
}
.toast.visible{ opacity:1; transform:translateX(-50%) translateY(0); }

/* header row with title + red close */
.toast .toast-header{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  margin-bottom:8px;
}
.toast .toast-title{ font-weight:600; font-size:17px; line-height:1.2; }

/* Toast header with title + red close */
/* Adjust font-size here to control the toast Ã— */
.toast .toast-close{
  appearance:none; -webkit-appearance:none;
  background:transparent; border:0; cursor:pointer;
  font-size:18px; /* set your desired toast Ã— size */
  line-height:1; color:#d11;
  padding:2px 6px; border-radius:6px;
}

.toast .toast-close:hover{ color:#a00; }
.toast .toast-close:focus-visible{ outline:2px solid currentColor; outline-offset:2px; }

/* body + links */
.toast .toast-body{ line-height:1.45; }
.toast a, .toast .toast-link{ color:#1976d2; text-decoration:underline; }
.toast a:hover, .toast .toast-link:hover{ text-decoration:none; }

/* legacy helpers kept for compat */
.toast-content{ text-align:center; display:flex; flex-direction:column; align-items:center; }
.toast-btn{
  margin-top:10px; background:#d1e0fe; color:#0f172a; border:0;
  padding:8px 16px; border-radius:8px; font-size:15px; font-weight:500; font-family:inherit;
  cursor:pointer; transition:background .3s ease;
}
.toast-btn:hover{ background:#c6dafe; }
/* .subtext intentionally not used anymore */

#scroll-zone {
  overflow-y: auto;
  height: calc(100vh - 400px); /* adjust this if layout shifts */
  padding-bottom: 90px;
}

/* ==========================================================================
   ğŸ§© Modal System â€” Structure + Variants
   Overlay scrolls at viewport edges; content never creates inner scrollbars.
   ========================================================================== */

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Base overlay (edge scrollbar) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal{
  position:fixed; inset:0; display:none; z-index:1000;
  background:rgba(0, 0, 0, 0.5); backdrop-filter:blur(3px);
  align-items:flex-start; justify-content:center;
  padding:16px;
  overflow-y:hidden;           /* card scrolls; no screen-edge bar */
}

.modal.visible{ display:flex; }
.modal.hidden{ display:none; }

/* White card; no internal scrolling */
.modal .modal-content{
  width:min(92vw, 640px);
  background:#fff; color:#333;
  border-radius:16px;
  box-shadow:0 10px 24px rgba(0,0,0,.18);
  max-height:calc(100vh - 32px);  /* 2Ã— overlay padding */
  overflow-y:auto;                 /* â† scrollbar on card edge */
  overflow-x:hidden;
  scrollbar-gutter: stable;        /* reserve just enough, no fat gutter */
}

/* Let the card be the only scroller; keep body content spaced */
.modal .modal-body{
  padding:0 16px 16px;
  overflow:visible;   /* no inner scroll that would make a mid-gutter */
}

/* Restore content padding, including the right side moved off the scroller */
.modal .modal-body-inner{
  font-size:16px;
  padding:0 16px 0 16px;
}

/* Buttons/footer area */
.modal .modal-actions{
  display:flex; flex-direction:column; align-items:flex-start;
  gap:.75em; margin-top:1.5em;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Variants (attach to .modal-content) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* Header flush to top; content retains side/bottom padding */
.modal .modal-content.modal-menu{
  padding: 0 1.5em 1.5em;   /* â¬…ï¸ remove ONLY the top padding */
}

/* Same for action-style modals (Help, etc.) */
.modal .modal-content.modal-action{
  padding: 0 1.5em 1.5em;   /* header attached; content spaced */
}

.modal-menu-list{ display:flex; flex-direction:column; gap:.75em; } /* helper */
.modal-menu-item{
  display:flex; align-items:center; gap:12px;
  padding:12px 16px; background:#f8f8f8; border:1px solid #e0e0e0;
  border-radius:10px; font:inherit; font-size:1rem; text-align:left;
  cursor:pointer; transition:background .2s ease;
}

/* View Settings selected option */
.modal-menu-item.is-active {
  background:#e8f0fe;
  border-color:#1a73e8;
  box-shadow:0 0 0 2px rgba(26,115,232,.15) inset;
}
.modal-menu-item.is-active:focus-visible {
  outline:2px solid #1a73e8;
  outline-offset:2px;
}
body.high-contrast .modal-menu-item.is-active {
  background:#333;
  border-color:#fff;
  box-shadow:0 0 0 2px rgba(255,255,255,.3) inset;
}

/* Layout variant â€” general forms/content (Share Location, Help) */
.modal .modal-content.modal-layout{ padding:1.5em; }
.modal-layout .modal-body p{
  font-size:1.05rem; line-height:1.5; margin-bottom:1.5em; text-align:left;
}
.modal-layout .form-control{ display:block; margin-bottom:1.5em; text-align:left; }

/* Alert variant â€” dismissible stack with footer */
.modal .modal-content.modal-alert{ padding:1.5em; }
.modal-alert .alert-card{
  background:#fff9f9; border:1px solid #ffd0d0; border-radius:8px;
  padding:1em 1.25em; margin-bottom:1em; box-shadow:0 0 0 1px rgba(255,0,0,.08);
}
.modal-alert .alert-card.unread{ background:#fff3f3; border-color:#ff9999; }
.modal-alert .alert-card .alert-action{ margin-top:.75em; text-align:right; }
.modal-alert-footer{
  margin-top:1.25em; font-size:.85rem; text-align:center; opacity:.7;
  border-top:1px solid #e0e0e0; padding-top:.75em;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modal Shop Category â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Used for: Final donation/product checkout */

.modal-shop-item {
  padding: 1.5em;
}

.modal-shop-item .price {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1em;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Purchase History Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Used for: Rendering receipt cards inside My Stuff modal */
/* Mirrors donation-option styling for visual consistency */

.purchase-card {
  background: #f9f9fc;                  /* ğŸ§Š Soft, clean background */
  border: 1px solid #e5e7eb;            /* ğŸªŸ Subtle border */
  border-radius: 12px;                  /* ğŸ’« Rounded edges */
  padding: 1rem 1.2rem;                 /* ğŸ“¦ Space inside */
  margin-bottom: 1rem;                  /* ğŸ“ Space between cards */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04); /* âœ¨ Soft lift */
}

.purchase-card:hover {
  border-color: #1a73e8;
  box-shadow: 0 2px 6px rgba(26, 115, 232, 0.12);
}

.purchase-card .subtext {
  font-size: 0.85rem;
  font-weight: 400;
  color: #666;
}

.purchase-card .timestamp {
  font-size: 0.8rem;
  color: #999;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Purchase History Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* Hosts all rendered purchases inside the modal */
/* Prevents height collapse and ensures cards are displayed */

#purchase-history {
  display: grid;                    /* âœ… Ensures spacing between purchase cards */
  grid-template-columns: 1fr;      /* âœ… Single-column layout */
  gap: 1em;                         /* âœ… Vertical spacing between cards */
  padding: 1.5em;                   /* âœ… Modal-safe inner spacing */
  min-height: 100px;               /* âœ… Prevents collapse when cards exist */
}


/* âœ… Make the checkmark blue */
.form-control input[type="checkbox"]:checked {
  accent-color: #1a73e8;
}

/* âœ… Keep checkbox label text muted */
.form-control {
  display: flex;
  align-items: center;
  gap: 0.5em;
  font-size: 0.95rem;
  color: #666; /* Adjust to your muted style if needed */
}

/* Header tint (soft background, readable border) */
.group-header-button[data-group] {
  /* do not remove existing comments; add minimal ones only */
  background-color: var(--group-color, transparent);
  border-color: var(--group-color-ink, currentColor);
}

/* Nested buttons: read ink color from the container vars set by JS */
.accordion-body .location-button,
.group-buttons .location-button {
  border-color: var(--group-color-ink, #ddd);
  box-shadow: 0 0 0 1px var(--group-color-ink, #ddd);
}

/* Hover/focus: gentle fill using the base color */
.location-button:hover,
.location-button:focus {
  background-color: var(--group-color, transparent);
}

/* Optional: quick buttons, chips, etc., if you have them */
.quick-button[data-group] {
  border-color: var(--group-color-ink, currentColor);
  background-color: var(--group-color, transparent);
}

/* Tag chips row shown just below the media image */
.tag-chips{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin:.6em 0;
}
.tag-chip{
  padding:.25em .6em;
  border:1px solid var(--group-color-ink,#cbd5e1);
  border-radius:999px;
  font-size:.8rem;
  background:var(--group-color,#f3f4f6);
  user-select:none;
}
.tag-chip:hover{
  box-shadow:0 0 0 2px var(--group-color-ink,#94a3b8);
}

/* ===== Dashboard layout: fixed header + scrollable table ===== */
/* Self-contained dashboard viewport */
#dash{
  /* dashboard-scoped design tokens */
  --font-sans: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  --text:#0f172a; --muted:#64748b; --border:#e5e7eb; --bg:#fff;
  --fs-base:14px; --fs-h1:32px; --pad-cell-y:6px; --pad-cell-x:10px;
  --sum-bg:#f1f5f9; /* Sum band */
  position:fixed; inset:8px; display:flex; flex-direction:column; min-height:0; box-sizing:border-box; /* was 16px */
  font-family:var(--font-sans); color:var(--text); background:var(--bg); border-radius:8px;
}

/* non-scrolling top area */
#dash-header{
  flex:0 0 auto; padding:6px 6px; border-bottom:1px solid var(--border); background:var(--bg);
}

#dash-header h1{ font-size:var(--fs-h1); line-height:1.15; font-weight:800; margin:0 0 4px 0; display:flex; align-items:center; gap:6px; }
#dash-header h1 .app-logo{ height:22px; width:auto; display:block; flex:0 0 auto; }
#dash-header input,#dash-header button,#dash-header select{ font:inherit; padding:6px 10px; border:1px solid var(--border); border-radius:6px; background:#fff; } /* keep */
/* move chevrons left a touch; keep 1ch gap to right edge */
#dash-header select{
  appearance:none; -webkit-appearance:none;  /* allow positioning */
  padding-right:2.2ch;                        /* room for glyph + 1ch gap */
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 6'><path d='M1 1l4 4 4-4' fill='none' stroke='%23666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat:no-repeat;
  background-position:right 1ch center;       /* chevron sits 1ch from edge */
  background-size:14px 14px;
}

/* Ensure selects always fit their longest labels */
#dash-header #mode   { min-width: 16ch; }  /* fits: "Entity (sum)" */
#dash-header #period { min-width: 20ch; }  /* fits: "8 weeks (56 days)" */

#dash-header button{ cursor:pointer; }
#dash-header .muted{ color:var(--muted); }

/* the ONLY vertical scroller for the dashboard */
#dash-table{
  flex:1 1 auto; min-height:0; display:flex; flex-direction:column; overflow:hidden; overscroll-behavior:contain;
  padding:0 12px 0; box-sizing:border-box;
}

/* unified scrollport: owns the bottom floor; no ::after, no table margins */
#dash-table-scroller{
  flex:1 1 auto; min-height:0; max-height:60vh; /* desktop/tablet cap */
  overflow-y:auto; overflow-x:auto; -webkit-overflow-scrolling:touch;
  padding-bottom:56px;             /* single source of floor on desktop */
  scroll-padding-bottom:56px;      /* mirror for programmatic scroll */
  scrollbar-gutter:stable both-edges;
  box-sizing:border-box; max-width:100%; text-align:left;
}

/* table fit */
#dash-table-scroller table{
  margin:0; border-collapse:collapse; width:max-content; font-size:var(--fs-base); background:var(--bg);
}
#dash-table-scroller th,#dash-table-scroller td{
  padding:var(--pad-cell-y) var(--pad-cell-x); white-space:nowrap; text-align:right; border:1px solid var(--border);
}
#dash-table-scroller th:first-child,#dash-table-scroller td:first-child{ text-align:left; }

/* sticky header */
#dash-table-scroller thead{
  position:sticky;
  top:-1px;                    /* pull header up 1px to close any visible gap */
  z-index:100;                 /* header paints above all rows */
  background:var(--sum-bg);
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  border-bottom:1px solid var(--border);
}

#dash-table-scroller thead th{ background-color:var(--sum-bg); font-weight:700; position:relative; z-index:5; }

/* Sticky first column â€” refreeze colMetric and keep Sum aligned like Metric */
#dash-table-scroller thead>tr>:first-child,
#dash-table-scroller tbody>tr>:first-child,
#dash-table-scroller tfoot>tr>:first-child{
  position: sticky;
  left: -1px; /* pull sticky metric column 1px left to close gap at scroll edge */
  top: auto; bottom: auto;  /* prevent vertical stickiness here */
  background-clip: padding-box;
  box-shadow: 1px 0 0 var(--border);
  transform: translateZ(0); /* Safari/iOS: ensure a stable sticky layer */
  contain: paint;           /* keep paint isolated so scrollers slide under */
  z-index: 10;              /* base; section-specific rules lift above */
}

/* Head cell: "Metric" */
#dash-table-scroller thead>tr>:first-child{
  background-color:var(--sum-bg);
  transform:translateZ(0);  /* stable sticky layer on iOS */
  z-index:110;              /* above tbody first col */
}

/* Body cells: metric values (no transform => no higher stacking ctx) */
#dash-table-scroller tbody>tr>:first-child{
  background:#fff;
  transform:none;           /* prevents covering the header */
  z-index:20;               /* stays under thead/foot */
}

/* Foot cell: "Sum" â€” match header stacking */
#dash-table-scroller tfoot>tr>:first-child{
  background-color:var(--sum-bg);
  transform:translateZ(0);
  z-index:105;
}

/* Ensure table provides a stable containing block for sticky cells (iOS/Safari quirks) */
#dash-table-scroller table{
  position: relative;      /* keeps sticky left stable in some WebKit builds */
  table-layout: fixed;     /* consistent column geometry while scrolling */
}

/* footer band */
#dash-table-scroller tfoot{ background:var(--sum-bg); box-shadow:0 -3px 8px rgba(0,0,0,.08); }
#dash-table-scroller tfoot th,#dash-table-scroller tfoot td{ font-weight:600; background:inherit; border-top:1px solid var(--border); }

/* sum column band */
#dash-table-scroller thead th:last-child,
#dash-table-scroller tbody td:last-child,
#dash-table-scroller tfoot th:last-child,
#dash-table-scroller tfoot td:last-child{ background:var(--sum-bg); font-weight:600; }

#dash-table-scroller tfoot th:first-child{
  font-weight:700; /* keep "Sum" label as bold as other metric names */
}

/* utilities */
#dash .row{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:6px; } /* keep */
#dash .row > label{ flex: 0 0 100%; }            /* each control on its own line */
#dash .row > #hint{ display:block; width:100%; } /* (now emptied in JS) still behaves as a line */
#dash input,#dash button,#dash select{ padding:6px 10px; }
#loc-wrap #locationID{ width:36ch; max-width:100%; }

/* Make the first lineâ€™s spacing match the rows */
#meta-lead { display:block; margin-bottom:6px; }

#meta{
  display:flex;
  align-items:center;
  flex-wrap:wrap;          /* allow wrap */
  column-gap:8px;          /* horizontal spacing between items */
  row-gap:6px;             /* vertical spacing between wrapped rows */
  align-content:flex-start;/* keep wrapped rows tight under the first line */
}

/* inline rating badge on the Period row */
.meta-rating{
  margin-left:0.75em;      /* visual gap between dropdown text and â­ block */
}

/* Single, explicit line-break helper: insert a bare element with this class */
#meta .meta-linebreak{
  flex-basis:100%;   /* push following items to a new line */
  width:100%;
  height:0;          /* no extra vertical space by itself */
  margin:0;
}

#copy-tsv{
  margin-left:auto; font:inherit; line-height:1; padding:4px 8px; border:1px solid var(--border); border-radius:6px; background:#fff; cursor:pointer;
  transition:background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
}

#copy-tsv:hover,#copy-tsv:focus-visible{
  background:#f8fafc; box-shadow:0 1px 2px rgba(0,0,0,.06); outline:none;
}

/* aspect selector buttons: Click Info / QR Info / Campaigns */
#dash-aspect-tabs{
  display:flex;
  gap:8px;                 /* visual separation between buttons */
  margin:4px 0;
}

#dash-aspect-tabs .dash-aspect-tab{
  font:inherit;
  line-height:1;
  padding:4px 10px;
  border:1px solid var(--border);
  border-radius:9999px;    /* pill shape, similar to other controls */
  background:#fff;
  cursor:pointer;
  transition:background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
}

/* selected tab */
#dash-aspect-tabs .dash-aspect-tab.active{
  background:var(--sum-bg);
  font-weight:600;
  box-shadow:0 1px 2px rgba(0,0,0,.06);
}

#copy-tsv.copied{

  background:#e2e8f0; border-color:#cbd5e1; box-shadow:inset 0 0 0 1px rgba(0,0,0,.02);
}

/* Refresh button â€” same look/feel; placed before Copy */
#refresh-page{
  font:inherit; line-height:1; padding:4px 8px; border:1px solid var(--border); border-radius:6px; background:#fff; cursor:pointer;
  margin-right:8px;           /* spacing before Copy button */
  transition:background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
}

#refresh-page:hover,#refresh-page:focus-visible{
  background:#f8fafc; box-shadow:0 1px 2px rgba(0,0,0,.06); outline:none;
}

/* Info button in dashboard meta bar (â„¹ï¸) */
#dash-info{
  font:inherit;
  line-height:1;
  padding:4px 8px;
  border:1px solid var(--border);
  border-radius:6px;
  background:#fff;
  cursor:pointer;
  margin-left:0;
  margin-right:4px; /* small gap before Copy */
  transition:background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
}
#dash-info:hover,#dash-info:focus-visible{
  background:#f8fafc;
  box-shadow:0 1px 2px rgba(0,0,0,.06);
  outline:none;
}

/* desktop/tablet: scale the floor with row-height when available */
@supports (height:1lh){
  #dash-table-scroller{
    padding-bottom:clamp(32px, 1.25lh, 7dvh);     /* â‰ˆ two rows room */
    scroll-padding-bottom:clamp(32px, 1.25lh, 7dvh);
  }
}

/* Mobile/touch: dynamic viewport + safe-area; same single source */
@media (pointer:coarse), (max-width:640px){
  #dash-table-scroller{
    max-height:60svh; height:auto; /* svh tracks visible space */
    padding-bottom:calc(clamp(20px, 1.5lh, 8dvh) + env(safe-area-inset-bottom,0px));
    scroll-padding-bottom:calc(clamp(20px, 1.5lh, 8dvh) + env(safe-area-inset-bottom,0px));
    -webkit-overflow-scrolling:touch;
  }
}

/* one-line label+input; scroll when narrow */
#dash-header #loc-wrap{ display:inline-flex; align-items:center; gap:8px; white-space:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch; }
/* compact input */
#dash-header #loc-wrap input#locationID{ width:24ch; flex:0 0 auto; min-width:10ch; }

/* Decorative refresh glyph after Period selector (UI-only) */
#period-refresh{
  font-size: inherit;      /* same size as â§‰ button text */
  line-height: 1;          /* align with controls */
  margin-left: 1ch;        /* ~one â€œspaceâ€ width */
  vertical-align: middle;  /* sit nicely on baseline */
  opacity: .85;            /* subtle, not a button */
  user-select: none;       /* decorative only */
}

/* Refresh button style (matches Copy) */
#refresh-page{
  /* Force consistent emoji size across devices (incl. iOS) */
  font-size:clamp(1em, 1rem + 2px, 1.35em); /* nudge above base, cap on desktop */
  -webkit-text-size-adjust:100%;            /* stop iOS text auto-shrink */
  line-height:1;
  padding:4px 8px;
  border:1px solid var(--border); border-radius:6px; background:#fff; cursor:pointer;
  margin-left:0; margin-right:8px;
  transition:background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
}

/* Force â€œSingle location daily countsâ€ onto the next line */
.meta-linebreak{ flex-basis:100%; display:block; margin-top:8px; }

/* Delta highlighting for latest date column â€” background only */
#dash-table-scroller td.delta-up{  background:#BBF7D0; } /* greenish */
#dash-table-scroller td.delta-down{ background:#FECACA; } /* reddish */
/* no delta-eq: ties remain with default styling */

/* colMetric distinct band â€” unified blueish tint + soft right-edge shade */
#dash-table-scroller thead>tr>:first-child,
#dash-table-scroller tbody>tr>:first-child,
#dash-table-scroller tfoot>tr>:first-child{
  background: #EAF2FF; /* same-grade blueish tint across the whole column */
  box-shadow: 1px 0 0 var(--border), 8px 0 8px -6px rgba(0,0,0,.12); /* right-edge shade */
}
