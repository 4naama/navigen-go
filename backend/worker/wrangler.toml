name = "navigen-api"
main = "src/index.ts"
compatibility_date = "2024-11-01"
workers_dev = true           # test on workers.dev first; add route later

# wrangler.toml
# When ready to serve on your domain, uncomment and set:
# Only QR + Track on navigen.io
routes = [
  { pattern = "navigen.io/s/*",               zone_name = "navigen.io" },
  { pattern = "navigen.io/api/track",         zone_name = "navigen.io" },
  { pattern = "navigen.io/api/qr*",           zone_name = "navigen.io" },
  { pattern = "navigen.io/api/status",        zone_name = "navigen.io" },
  { pattern = "navigen.io/api/stats",         zone_name = "navigen.io" },
  { pattern = "navigen.io/api/stats/entity",  zone_name = "navigen.io" }
]

[vars]
# secrets are set via `wrangler secret put ...`
# JWT_SECRET = ""
# STRIPE_SECRET_KEY = ""
# STRIPE_WEBHOOK_SECRET = ""

# --- KV bindings (PROD) ---
[[kv_namespaces]]
binding = "KV_STATUS"
id      = "954225d615444adcaee6e41d8168b386"

[[kv_namespaces]]
binding = "KV_ALIASES"
id      = "56c318c8648145e580a825afa8e3d710"

[[kv_namespaces]]
binding = "KV_OVERRIDES"
id      = "773992a1ee824aac8352cf313231ff51"

[[kv_namespaces]]
binding = "KV_STATS"
id      = "306bdf6786d34a008902cafb4f264ecd"
